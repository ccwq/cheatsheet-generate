<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  

    <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png" />

    <meta name="apple-mobile-web-app-title" content="CodePen">

    <link rel="icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico" />

    <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-b4b4269c16397ad2f0f7a01bcdf513a1994f4c94b8af2f191c09eb0d601762b1.svg" color="#111" />



  
  

  <title>Lerna.js å¼€å‘é€ŸæŸ¥è¡¨</title>

    <link rel="canonical" href="https://codepen.io/zeniok/pen/myeOMeJ">
  
  
  
  

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
</head>

<body translate="no">
  <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lerna.js å¼€å‘é€ŸæŸ¥è¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 12px;
            line-height: 1.1;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            width: 100%;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        .tags {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .tag {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .column-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
        }

        .column-controls label {
            font-weight: 600;
            color: #667eea;
        }

        .column-slider {
            width: 300px;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .column-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .column-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .column-info {
            color: #764ba2;
            font-weight: 600;
        }

        .content {
            column-gap: 30px;
            column-fill: balance;
        }

        .module {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            break-inside: avoid;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }

        .module h2 {
            color: #667eea;
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module h3 {
            color: #764ba2;
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 5px;
        }

        .module p {
            margin-bottom: 15px;
            color: #555;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            position: relative;
            overflow-x: auto;
        }

        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 5px;
            right: 5px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            text-transform: uppercase;
        }

        .note {
            background: linear-gradient(45deg, #e3f2fd, #f3e5f5);
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .tip {
            background: linear-gradient(45deg, #e8f5e8, #f0f8f0);
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning {
            background: linear-gradient(45deg, #fff3e0, #ffeaa7);
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .syntax-keyword { color: #569cd6; }
        .syntax-string { color: #ce9178; }
        .syntax-comment { color: #6a9955; }
        .syntax-number { color: #b5cea8; }
        .syntax-function { color: #dcdcaa; }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
      .code-block {
        white-space: pre-wrap;
        word-break: break-all;
    }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Lerna.js å¼€å‘é€ŸæŸ¥è¡¨</h1>
            <p>å¿«é€Ÿã€ç°ä»£çš„JavaScript/TypeScriptå¤šåŒ…ç®¡ç†æ„å»ºç³»ç»Ÿ</p>
            <div class="tags">
                <span class="tag">Monorepo</span>
                <span class="tag">åŒ…ç®¡ç†</span>
                <span class="tag">ç‰ˆæœ¬æ§åˆ¶</span>
                <span class="tag">æ„å»ºå·¥å…·</span>
                <span class="tag">å‘å¸ƒç®¡ç†</span>
                <span class="tag">å·¥ä½œåŒº</span>
                <span class="tag">ç¼“å­˜ä¼˜åŒ–</span>
            </div>
        </div>

        <div class="column-controls">
            <label for="columnWidth">åˆ—å®½è®¾ç½®:</label>
            <input type="range" id="columnWidth" class="column-slider" min="300" max="660" value="400" step="10">
            <div class="column-info">
                <span id="widthValue">400</span>px | åˆ—æ•°: <span id="columnCount">3</span>
            </div>
        </div>

        <div class="content" id="content">
            <!-- åŸºç¡€æ¦‚å¿µå’Œå®‰è£… -->
            <div class="module">
                <h2>ğŸ“¦ åŸºç¡€æ¦‚å¿µå’Œå®‰è£…</h2>
                <p>Lernaæ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åŒ…å«å¤šä¸ªåŒ…çš„JavaScripté¡¹ç›®çš„å·¥å…·ï¼Œå®ƒä¼˜åŒ–äº†å¤šåŒ…å·¥ä½œæµç¨‹ã€‚</p>
                
                <h3>å…¨å±€å®‰è£…</h3>
                <div class="code-block" data-lang="bash">
# å…¨å±€å®‰è£…Lerna
<span class="syntax-keyword">npm</span> install --global lerna

<span class="syntax-comment"># æˆ–è€…ä½¿ç”¨yarn</span>
<span class="syntax-keyword">yarn</span> global add lerna
                </div>

                <h3>é¡¹ç›®å†…å®‰è£…</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># ä½œä¸ºå¼€å‘ä¾èµ–å®‰è£…</span>
<span class="syntax-keyword">npm</span> install --save-dev lerna

<span class="syntax-comment"># æˆ–è€…ä½¿ç”¨yarn</span>
<span class="syntax-keyword">yarn</span> add -D lerna
                </div>

                <div class="note">
                    <strong>æ³¨æ„ï¼š</strong>Lernaæ”¯æŒnpmã€yarnå’Œpnpmä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œéœ€è¦é¢„å…ˆå®‰è£…Node.jsç¯å¢ƒã€‚
                </div>
            </div>

            <!-- åˆå§‹åŒ–å’Œé…ç½® -->
            <div class="module">
                <h2>âš™ï¸ åˆå§‹åŒ–å’Œé…ç½®</h2>
                <p>ä½¿ç”¨Lernaåˆå§‹åŒ–æ–°çš„monorepoæˆ–å°†ç°æœ‰é¡¹ç›®è½¬æ¢ä¸ºLernaç®¡ç†çš„é¡¹ç›®ã€‚</p>

                <h3>åˆå§‹åŒ–æ–°é¡¹ç›®</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># é¢„è§ˆåˆå§‹åŒ–æ›´æ”¹ï¼ˆæ¨èï¼‰</span>
<span class="syntax-keyword">npx</span> lerna init --dryRun

<span class="syntax-comment"># æ­£å¼åˆå§‹åŒ–</span>
<span class="syntax-keyword">npx</span> lerna init

<span class="syntax-comment"># ä½¿ç”¨ç‹¬ç«‹ç‰ˆæœ¬æ¨¡å¼</span>
<span class="syntax-keyword">npx</span> lerna init --independent
                </div>

                <h3>lerna.jsoné…ç½®æ–‡ä»¶</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"$schema"</span>: <span class="syntax-string">"node_modules/lerna/schemas/lerna-schema.json"</span>,
  <span class="syntax-string">"version"</span>: <span class="syntax-string">"0.0.0"</span>,
  <span class="syntax-string">"packages"</span>: [<span class="syntax-string">"packages/*"</span>],
  <span class="syntax-string">"npmClient"</span>: <span class="syntax-string">"npm"</span>,
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"publish"</span>: {
      <span class="syntax-string">"conventionalCommits"</span>: <span class="syntax-keyword">true</span>,
      <span class="syntax-string">"message"</span>: <span class="syntax-string">"chore(release): publish"</span>
    }
  }
}
                </div>

                <div class="tip">
                    <strong>æç¤ºï¼š</strong>ä½¿ç”¨--dryRunæ ‡å¿—å¯ä»¥é¢„è§ˆåˆå§‹åŒ–å°†è¿›è¡Œçš„æ›´æ”¹ï¼Œé¿å…æ„å¤–ä¿®æ”¹ã€‚
                </div>
            </div>

            <!-- åŒ…ç®¡ç† -->
            <div class="module">
                <h2>ğŸ“‹ åŒ…ç®¡ç†</h2>
                <p>åˆ›å»ºã€ç®¡ç†å’Œé…ç½®monorepoä¸­çš„å„ä¸ªåŒ…ã€‚</p>

                <h3>åˆ›å»ºæ–°åŒ…</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># åˆ›å»ºæ–°åŒ…</span>
<span class="syntax-keyword">lerna</span> create my-package

<span class="syntax-comment"># åœ¨æŒ‡å®šä½ç½®åˆ›å»ºåŒ…</span>
<span class="syntax-keyword">lerna</span> create my-package packages/

<span class="syntax-comment"># åˆ›å»ºä½œç”¨åŸŸåŒ…</span>
<span class="syntax-keyword">lerna</span> create @my-scope/my-package
                </div>

                <h3>åˆ—å‡ºæ‰€æœ‰åŒ…</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># åˆ—å‡ºæ‰€æœ‰åŒ…</span>
<span class="syntax-keyword">lerna</span> list

<span class="syntax-comment"># æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span>
<span class="syntax-keyword">lerna</span> list --long

<span class="syntax-comment"># ä»¥JSONæ ¼å¼è¾“å‡º</span>
<span class="syntax-keyword">lerna</span> list --json
                </div>

                <h3>æ·»åŠ ä¾èµ–</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># ä¸ºç‰¹å®šåŒ…æ·»åŠ ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> add lodash --scope=my-package

<span class="syntax-comment"># ä¸ºæ‰€æœ‰åŒ…æ·»åŠ ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> add lodash

<span class="syntax-comment"># æ·»åŠ å¼€å‘ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> add jest --dev --scope=my-package
                </div>

                <div class="warning">
                    <strong>æ³¨æ„ï¼š</strong>Lernaä¸»è¦è´Ÿè´£åŒ…ä¹‹é—´çš„é“¾æ¥å’Œç‰ˆæœ¬ç®¡ç†ï¼Œå®é™…çš„ä¾èµ–å®‰è£…å»ºè®®ä½¿ç”¨åŒ…ç®¡ç†å™¨çš„workspaceåŠŸèƒ½ã€‚
                </div>
            </div>

            <!-- è¿è¡Œä»»åŠ¡ -->
            <div class="module">
                <h2>ğŸƒâ€â™‚ï¸ è¿è¡Œä»»åŠ¡</h2>
                <p>åœ¨å¤šä¸ªåŒ…ä¸­å¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡Œè„šæœ¬å’Œå‘½ä»¤ã€‚</p>

                <h3>æ‰§è¡Œnpmè„šæœ¬</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># åœ¨æ‰€æœ‰åŒ…ä¸­è¿è¡Œtestè„šæœ¬</span>
<span class="syntax-keyword">lerna</span> run test

<span class="syntax-comment"># åœ¨ç‰¹å®šåŒ…ä¸­è¿è¡Œè„šæœ¬</span>
<span class="syntax-keyword">lerna</span> run test --scope=my-package

<span class="syntax-comment"># å¹¶è¡Œæ‰§è¡Œï¼ˆæ›´å¿«ï¼‰</span>
<span class="syntax-keyword">lerna</span> run build --parallel

<span class="syntax-comment"># æµå¼è¾“å‡º</span>
<span class="syntax-keyword">lerna</span> run test --stream
                </div>

                <h3>æ‰§è¡Œä»»æ„å‘½ä»¤</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># åœ¨æ‰€æœ‰åŒ…ä¸­æ‰§è¡Œå‘½ä»¤</span>
<span class="syntax-keyword">lerna</span> exec -- npm audit

<span class="syntax-comment"># åœ¨ç‰¹å®šåŒ…ä¸­æ‰§è¡Œå‘½ä»¤</span>
<span class="syntax-keyword">lerna</span> exec --scope=my-package -- ls -la

<span class="syntax-comment"># å¹¶è¡Œæ‰§è¡Œå‘½ä»¤</span>
<span class="syntax-keyword">lerna</span> exec --parallel -- npm run lint
                </div>

                <h3>ä»»åŠ¡ä¾èµ–é…ç½®</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// nx.json æ–‡ä»¶ä¸­é…ç½®ä»»åŠ¡ä¾èµ–</span>
{
  <span class="syntax-string">"targetDefaults"</span>: {
    <span class="syntax-string">"build"</span>: {
      <span class="syntax-string">"dependsOn"</span>: [<span class="syntax-string">"^build"</span>]
    },
    <span class="syntax-string">"test"</span>: {
      <span class="syntax-string">"dependsOn"</span>: [<span class="syntax-string">"build"</span>]
    }
  }
}
                </div>
            </div>

            <!-- å‘å¸ƒç®¡ç† -->
            <div class="module">
                <h2>ğŸš€ å‘å¸ƒç®¡ç†</h2>
                <p>è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†å’ŒåŒ…å‘å¸ƒæµç¨‹ã€‚</p>

                <h3>å‘å¸ƒåŒ…</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># å‘å¸ƒæ‰€æœ‰æ›´æ”¹çš„åŒ…</span>
<span class="syntax-keyword">lerna</span> publish

<span class="syntax-comment"># é¢„å‘å¸ƒç‰ˆæœ¬</span>
<span class="syntax-keyword">lerna</span> publish --dist-tag=beta

<span class="syntax-comment"># ä»ç‰¹å®šæäº¤å‘å¸ƒ</span>
<span class="syntax-keyword">lerna</span> publish from-git

<span class="syntax-comment"># ä»åŒ…å†…å®¹å‘å¸ƒ</span>
<span class="syntax-keyword">lerna</span> publish from-package
                </div>

                <h3>ç‰ˆæœ¬ç®¡ç†</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># äº¤äº’å¼ç‰ˆæœ¬é€‰æ‹©</span>
<span class="syntax-keyword">lerna</span> version

<span class="syntax-comment"># æŒ‡å®šç‰ˆæœ¬ç±»å‹</span>
<span class="syntax-keyword">lerna</span> version patch
<span class="syntax-keyword">lerna</span> version minor
<span class="syntax-keyword">lerna</span> version major

<span class="syntax-comment"># é¢„å‘å¸ƒç‰ˆæœ¬</span>
<span class="syntax-keyword">lerna</span> version prerelease --preid=alpha
                </div>

                <h3>å‘å¸ƒé…ç½®</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// lerna.jsonä¸­çš„å‘å¸ƒé…ç½®</span>
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"publish"</span>: {
      <span class="syntax-string">"conventionalCommits"</span>: <span class="syntax-keyword">true</span>,
      <span class="syntax-string">"message"</span>: <span class="syntax-string">"chore(release): publish %s"</span>,
      <span class="syntax-string">"registry"</span>: <span class="syntax-string">"https://registry.npmjs.org"</span>,
      <span class="syntax-string">"ignoreChanges"</span>: [<span class="syntax-string">"*.md"</span>]
    }
  }
}
                </div>

                <div class="tip">
                    <strong>æç¤ºï¼š</strong>ä½¿ç”¨conventionalCommitså¯ä»¥è‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—å’Œç¡®å®šç‰ˆæœ¬å·ã€‚
                </div>
            </div>

            <!-- ç‰ˆæœ¬æ§åˆ¶ -->
            <div class="module">
                <h2>ğŸ”„ ç‰ˆæœ¬æ§åˆ¶</h2>
                <p>ç®¡ç†åŒ…ç‰ˆæœ¬å’Œå˜æ›´æ£€æµ‹ã€‚</p>

                <h3>æ£€æŸ¥å˜æ›´</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æŸ¥çœ‹è‡ªä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„å˜æ›´</span>
<span class="syntax-keyword">lerna</span> changed

<span class="syntax-comment"># æŸ¥çœ‹å“ªäº›åŒ…ä¼šè¢«å‘å¸ƒ</span>
<span class="syntax-keyword">lerna</span> changed --json

<span class="syntax-comment"># å¯¹æ¯”ä¸¤ä¸ªæ ‡ç­¾é—´çš„å˜æ›´</span>
<span class="syntax-keyword">lerna</span> diff v1.0.0..v1.1.0
                </div>

                <h3>ç‰ˆæœ¬æ¨¡å¼</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// å›ºå®šç‰ˆæœ¬æ¨¡å¼</span>
{
  <span class="syntax-string">"version"</span>: <span class="syntax-string">"1.0.0"</span>
}

<span class="syntax-comment">// ç‹¬ç«‹ç‰ˆæœ¬æ¨¡å¼</span>
{
  <span class="syntax-string">"version"</span>: <span class="syntax-string">"independent"</span>
}
                </div>

                <h3>ç‰ˆæœ¬ç­–ç•¥é…ç½®</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"version"</span>: {
      <span class="syntax-string">"allowBranch"</span>: [<span class="syntax-string">"master"</span>, <span class="syntax-string">"main"</span>],
      <span class="syntax-string">"conventionalCommits"</span>: <span class="syntax-keyword">true</span>,
      <span class="syntax-string">"exact"</span>: <span class="syntax-keyword">true</span>,
      <span class="syntax-string">"ignoreChanges"</span>: [
        <span class="syntax-string">"**/*.md"</span>,
        <span class="syntax-string">"**/*.test.js"</span>
      ]
    }
  }
}
                </div>
            </div>

            <!-- å·¥ä½œåŒºç®¡ç† -->
            <div class="module">
                <h2>ğŸ—ï¸ å·¥ä½œåŒºç®¡ç†</h2>
                <p>é…ç½®å’Œç®¡ç†monorepoå·¥ä½œåŒºã€‚</p>

                <h3>å·¥ä½œåŒºé…ç½®</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// package.json ä¸­çš„workspacesé…ç½®</span>
{
  <span class="syntax-string">"name"</span>: <span class="syntax-string">"my-monorepo"</span>,
  <span class="syntax-string">"private"</span>: <span class="syntax-keyword">true</span>,
  <span class="syntax-string">"workspaces"</span>: [
    <span class="syntax-string">"packages/*"</span>,
    <span class="syntax-string">"apps/*"</span>
  ]
}
                </div>

                <h3>åŒ…é“¾æ¥ç®¡ç†</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># é“¾æ¥æ‰€æœ‰ç›¸äº’ä¾èµ–çš„åŒ…</span>
<span class="syntax-keyword">lerna</span> link

<span class="syntax-comment"># è½¬æ¢ç›¸å¯¹è·¯å¾„ä¸ºç¬¦å·é“¾æ¥</span>
<span class="syntax-keyword">lerna</span> link convert

<span class="syntax-comment"># æ¸…ç†node_moduleså¹¶é‡æ–°å®‰è£…</span>
<span class="syntax-keyword">lerna</span> clean
<span class="syntax-keyword">lerna</span> bootstrap
                </div>

                <h3>ä¾èµ–æå‡</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// lerna.jsonä¸­çš„ä¾èµ–æå‡é…ç½®</span>
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"bootstrap"</span>: {
      <span class="syntax-string">"hoist"</span>: <span class="syntax-keyword">true</span>,
      <span class="syntax-string">"nohoist"</span>: [<span class="syntax-string">"**/react-native/**"</span>]
    }
  }
}
                </div>

                <div class="note">
                    <strong>æ³¨æ„ï¼š</strong>ç°ä»£Lernaæ¨èä½¿ç”¨åŒ…ç®¡ç†å™¨çš„åŸç”ŸworkspaceåŠŸèƒ½è€Œä¸æ˜¯bootstrapå‘½ä»¤ã€‚
                </div>
            </div>

            <!-- ç¼“å­˜æœºåˆ¶ -->
            <div class="module">
                <h2>âš¡ ç¼“å­˜æœºåˆ¶</h2>
                <p>åˆ©ç”¨Nxæä¾›çš„å¼ºå¤§ç¼“å­˜èƒ½åŠ›æå‡æ„å»ºæ•ˆç‡ã€‚</p>

                <h3>ä»»åŠ¡ç¼“å­˜é…ç½®</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// nx.json ç¼“å­˜é…ç½®</span>
{
  <span class="syntax-string">"tasksRunnerOptions"</span>: {
    <span class="syntax-string">"default"</span>: {
      <span class="syntax-string">"runner"</span>: <span class="syntax-string">"nx/tasks-runners/default"</span>,
      <span class="syntax-string">"options"</span>: {
        <span class="syntax-string">"cacheableOperations"</span>: [
          <span class="syntax-string">"build"</span>,
          <span class="syntax-string">"test"</span>,
          <span class="syntax-string">"lint"</span>
        ]
      }
    }
  }
}
                </div>

                <h3>ç¼“å­˜ç®¡ç†å‘½ä»¤</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æŸ¥çœ‹ç¼“å­˜çŠ¶æ€</span>
<span class="syntax-keyword">npx</span> nx show projects --with-target=build

<span class="syntax-comment"># æ¸…é™¤ç¼“å­˜</span>
<span class="syntax-keyword">npx</span> nx reset

<span class="syntax-comment"># è¿è¡Œå¸¦ç¼“å­˜çš„æ„å»º</span>
<span class="syntax-keyword">lerna</span> run build --skip-nx-cache=false
                </div>

                <h3>åˆ†å¸ƒå¼ç¼“å­˜</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"tasksRunnerOptions"</span>: {
    <span class="syntax-string">"default"</span>: {
      <span class="syntax-string">"options"</span>: {
        <span class="syntax-string">"remoteCache"</span>: {
          <span class="syntax-string">"url"</span>: <span class="syntax-string">"https://cache.nx.dev"</span>,
          <span class="syntax-string">"accessToken"</span>: <span class="syntax-string">"your-access-token"</span>
        }
      }
    }
  }
}
                </div>

                <div class="tip">
                    <strong>æç¤ºï¼š</strong>ç¼“å­˜å¯ä»¥æ˜¾è‘—åŠ é€Ÿé‡å¤æ„å»ºï¼Œç‰¹åˆ«æ˜¯åœ¨CI/CDç¯å¢ƒä¸­ã€‚
                </div>
            </div>

            <!-- ä¾èµ–ç®¡ç† -->
            <div class="module">
                <h2>ğŸ”— ä¾èµ–ç®¡ç†</h2>
                <p>ç®¡ç†åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»å’Œå¤–éƒ¨ä¾èµ–ã€‚</p>

                <h3>å†…éƒ¨ä¾èµ–ç®¡ç†</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æ·»åŠ å†…éƒ¨åŒ…ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> add @myorg/package-a --scope=@myorg/package-b

<span class="syntax-comment"># æŸ¥çœ‹åŒ…ä¾èµ–å›¾</span>
<span class="syntax-keyword">npx</span> nx graph

<span class="syntax-comment"># æ˜¾ç¤ºåŒ…çš„ä¾èµ–å…³ç³»</span>
<span class="syntax-keyword">lerna</span> list --graph
                </div>

                <h3>åŒ…ç‰ˆæœ¬åŒæ­¥</h3>
                <div class="code-block" data-lang="json">
<span class="syntax-comment">// ç¡®ä¿å†…éƒ¨ä¾èµ–ç‰ˆæœ¬åŒæ­¥</span>
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"version"</span>: {
      <span class="syntax-string">"exact"</span>: <span class="syntax-keyword">true</span>
    }
  }
}
                </div>

                <h3>ä¾èµ–æ£€æŸ¥</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æ£€æŸ¥æ‰€æœ‰åŒ…çš„ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> exec -- npm audit

<span class="syntax-comment"># æ›´æ–°ä¾èµ–</span>
<span class="syntax-keyword">lerna</span> exec -- npm update

<span class="syntax-comment"># æ£€æŸ¥é‡å¤ä¾èµ–</span>
<span class="syntax-keyword">npm</span> ls --all
                </div>
            </div>

            <!-- å‘½ä»¤è¡Œå·¥å…· -->
            <div class="module">
                <h2>ğŸ’» å‘½ä»¤è¡Œå·¥å…·</h2>
                <p>Lernaæä¾›çš„å®Œæ•´å‘½ä»¤è¡Œç•Œé¢ã€‚</p>

                <h3>å¸¸ç”¨å‘½ä»¤</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span>
<span class="syntax-keyword">lerna</span> --help

<span class="syntax-comment"># æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</span>
<span class="syntax-keyword">lerna</span> --version

<span class="syntax-comment"># è¯¦ç»†è¾“å‡ºæ¨¡å¼</span>
<span class="syntax-keyword">lerna</span> run build --verbose

<span class="syntax-comment"># é™é»˜æ¨¡å¼</span>
<span class="syntax-keyword">lerna</span> publish --yes
                </div>

                <h3>è¿‡æ»¤é€‰é¡¹</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æŒ‡å®šåŒ…èŒƒå›´</span>
<span class="syntax-keyword">lerna</span> run test --scope=package-*

<span class="syntax-comment"># æ’é™¤ç‰¹å®šåŒ…</span>
<span class="syntax-keyword">lerna</span> run build --ignore=package-ignore

<span class="syntax-comment"># åªè¿è¡Œæ›´æ”¹çš„åŒ…</span>
<span class="syntax-keyword">lerna</span> run test --since=master
                </div>

                <h3>è¾“å‡ºæ ¼å¼</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æµå¼è¾“å‡º</span>
<span class="syntax-keyword">lerna</span> run build --stream

<span class="syntax-comment"># å¹¶è¡Œæ‰§è¡Œ</span>
<span class="syntax-keyword">lerna</span> run test --parallel

<span class="syntax-comment"># JSONæ ¼å¼è¾“å‡º</span>
<span class="syntax-keyword">lerna</span> list --json --toposort
                </div>
            </div>

            <!-- é…ç½®é€‰é¡¹ -->
            <div class="module">
                <h2>âš™ï¸ é…ç½®é€‰é¡¹</h2>
                <p>è¯¦ç»†çš„é…ç½®é€‰é¡¹å’Œå‚æ•°è¯´æ˜ã€‚</p>

                <h3>npmClienté…ç½®</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"npmClient"</span>: <span class="syntax-string">"yarn"</span>,
  <span class="syntax-comment">// å¯é€‰å€¼: "npm", "yarn", "pnpm"</span>
  <span class="syntax-string">"useWorkspaces"</span>: <span class="syntax-keyword">true</span>
}
                </div>

                <h3>åŒ…è·¯å¾„é…ç½®</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"packages"</span>: [
    <span class="syntax-string">"packages/*"</span>,
    <span class="syntax-string">"apps/*"</span>,
    <span class="syntax-string">"libs/*"</span>
  ]
}
                </div>

                <h3>å‘½ä»¤ç‰¹å®šé…ç½®</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"run"</span>: {
      <span class="syntax-string">"stream"</span>: <span class="syntax-keyword">true</span>
    },
    <span class="syntax-string">"version"</span>: {
      <span class="syntax-string">"allowBranch"</span>: <span class="syntax-string">"master"</span>,
      <span class="syntax-string">"conventionalCommits"</span>: <span class="syntax-keyword">true</span>
    }
  }
}
                </div>

                <table>
                    <tr>
                        <th>é…ç½®é¡¹</th>
                        <th>ç±»å‹</th>
                        <th>é»˜è®¤å€¼</th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td>version</td>
                        <td>string</td>
                        <td>0.0.0</td>
                        <td>å½“å‰ç‰ˆæœ¬æˆ–"independent"</td>
                    </tr>
                    <tr>
                        <td>npmClient</td>
                        <td>string</td>
                        <td>npm</td>
                        <td>åŒ…ç®¡ç†å™¨é€‰æ‹©</td>
                    </tr>
                    <tr>
                        <td>packages</td>
                        <td>array</td>
                        <td>["packages/*"]</td>
                        <td>åŒ…è·¯å¾„æ¨¡å¼</td>
                    </tr>
                </table>
            </div>

            <!-- æœ€ä½³å®è·µ -->
            <div class="module">
                <h2>âœ¨ æœ€ä½³å®è·µ</h2>
                <p>é«˜æ•ˆä½¿ç”¨Lernaçš„å»ºè®®å’ŒæŠ€å·§ã€‚</p>

                <h3>é¡¹ç›®ç»“æ„</h3>
                <div class="code-block" data-lang="text">
my-monorepo/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ package-a/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ package-b/
â”‚       â”œâ”€â”€ src/
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ web-app/
â”œâ”€â”€ lerna.json
â”œâ”€â”€ nx.json
â””â”€â”€ package.json
                </div>

                <h3>ç‰ˆæœ¬ç®¡ç†ç­–ç•¥</h3>
                <ul>
                    <li>ä½¿ç”¨ç‹¬ç«‹ç‰ˆæœ¬æ¨¡å¼ç®¡ç†ä¸åŒå‘å¸ƒå‘¨æœŸçš„åŒ…</li>
                    <li>å¯ç”¨conventionalCommitsè‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—</li>
                    <li>è®¾ç½®ignoreChangeså¿½ç•¥æ–‡æ¡£ç­‰éåŠŸèƒ½æ€§æ›´æ”¹</li>
                    <li>ä½¿ç”¨allowBranché™åˆ¶å‘å¸ƒåˆ†æ”¯</li>
                </ul>

                <h3>æ€§èƒ½ä¼˜åŒ–</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œ</span>
<span class="syntax-keyword">lerna</span> run build --parallel

<span class="syntax-comment"># åªæ„å»ºæ›´æ”¹çš„åŒ…</span>
<span class="syntax-keyword">lerna</span> run build --since=HEAD~1

<span class="syntax-comment"># åˆ©ç”¨ç¼“å­˜</span>
<span class="syntax-keyword">lerna</span> run build --skip-nx-cache=false
                </div>

                <div class="tip">
                    <strong>æœ€ä½³å®è·µï¼š</strong>
                    <ul>
                        <li>é…åˆå·¥ä½œåŒºä½¿ç”¨ä»¥æé«˜ä¾èµ–ç®¡ç†æ•ˆç‡</li>
                        <li>ä½¿ç”¨Nxç¼“å­˜å’Œä¾èµ–å›¾åˆ†ææå‡æ„å»ºé€Ÿåº¦</li>
                        <li>å»ºç«‹æ¸…æ™°çš„åŒ…å‘½åè§„èŒƒå’Œç‰ˆæœ¬ç­–ç•¥</li>
                    </ul>
                </div>
            </div>

            <!-- æ•…éšœæ’æŸ¥ -->
            <div class="module">
                <h2>ğŸ”§ æ•…éšœæ’æŸ¥</h2>
                <p>å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå’Œè°ƒè¯•æŠ€å·§ã€‚</p>

                <h3>å¸¸è§é—®é¢˜</h3>
                <div class="warning">
                    <strong>é—®é¢˜ï¼š</strong>lerna publishå¤±è´¥<br>
                    <strong>è§£å†³ï¼š</strong>æ£€æŸ¥npmç™»å½•çŠ¶æ€å’ŒåŒ…æƒé™
                </div>

                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æ£€æŸ¥npmç™»å½•çŠ¶æ€</span>
<span class="syntax-keyword">npm</span> whoami

<span class="syntax-comment"># ç™»å½•npm</span>
<span class="syntax-keyword">npm</span> login

<span class="syntax-comment"># æ£€æŸ¥åŒ…æƒé™</span>
<span class="syntax-keyword">npm</span> access list packages
                </div>

                <h3>è°ƒè¯•é€‰é¡¹</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># å¯ç”¨è¯¦ç»†æ—¥å¿—</span>
<span class="syntax-keyword">DEBUG=lerna:*</span> lerna publish

<span class="syntax-comment"># æŸ¥çœ‹å°†è¦æ‰§è¡Œçš„æ›´æ”¹</span>
<span class="syntax-keyword">lerna</span> publish --dry-run

<span class="syntax-comment"># è·³è¿‡Gitæ£€æŸ¥</span>
<span class="syntax-keyword">lerna</span> publish --skip-git
                </div>

                <h3>é‡ç½®å’Œæ¸…ç†</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># æ¸…ç†æ‰€æœ‰node_modules</span>
<span class="syntax-keyword">lerna</span> clean --yes

<span class="syntax-comment"># é‡æ–°å®‰è£…ä¾èµ–</span>
<span class="syntax-keyword">npm</span> install

<span class="syntax-comment"># é‡ç½®Nxç¼“å­˜</span>
<span class="syntax-keyword">npx</span> nx reset
                </div>
            </div>

            <!-- é«˜çº§åŠŸèƒ½ -->
            <div class="module">
                <h2>ğŸš€ é«˜çº§åŠŸèƒ½</h2>
                <p>Lernaçš„é«˜çº§ç‰¹æ€§å’Œæ‰©å±•åŠŸèƒ½ã€‚</p>

                <h3>è‡ªå®šä¹‰å‘å¸ƒæµç¨‹</h3>
                <div class="code-block" data-lang="json">
{
  <span class="syntax-string">"command"</span>: {
    <span class="syntax-string">"publish"</span>: {
      <span class="syntax-string">"registry"</span>: <span class="syntax-string">"https://npm.company.com"</span>,
      <span class="syntax-string">"beforePublish"</span>: <span class="syntax-string">"npm run build"</span>,
      <span class="syntax-string">"afterPublish"</span>: <span class="syntax-string">"npm run deploy"</span>
    }
  }
}
                </div>

                <h3>é›†æˆCI/CD</h3>
                <div class="code-block" data-lang="yaml">
<span class="syntax-comment"># GitHub Actions ç¤ºä¾‹</span>
<span class="syntax-keyword">name</span>: Release
<span class="syntax-keyword">on</span>:
  <span class="syntax-keyword">push</span>:
    <span class="syntax-keyword">branches</span>: [main]
<span class="syntax-keyword">jobs</span>:
  <span class="syntax-keyword">release</span>:
    <span class="syntax-keyword">runs-on</span>: ubuntu-latest
    <span class="syntax-keyword">steps</span>:
      - <span class="syntax-keyword">uses</span>: actions/checkout@v3
      - <span class="syntax-keyword">run</span>: npm ci
      - <span class="syntax-keyword">run</span>: lerna run build
      - <span class="syntax-keyword">run</span>: lerna publish --yes
                </div>

                <h3>ä¾èµ–å›¾å¯è§†åŒ–</h3>
                <div class="code-block" data-lang="bash">
<span class="syntax-comment"># ç”Ÿæˆä¾èµ–å›¾</span>
<span class="syntax-keyword">npx</span> nx graph

<span class="syntax-comment"># åˆ†æç‰¹å®šé¡¹ç›®çš„ä¾èµ–</span>
<span class="syntax-keyword">npx</span> nx show project my-package --web

<span class="syntax-comment"># æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œé¡ºåº</span>
<span class="syntax-keyword">npx</span> nx run-many --target=build --graph
                </div>

                <div class="note">
                    <strong>é«˜çº§æŠ€å·§ï¼š</strong>ç»“åˆNxçš„å¼ºå¤§åŠŸèƒ½ï¼ŒLernaå¯ä»¥å®ç°å¢é‡æ„å»ºã€åˆ†å¸ƒå¼ç¼“å­˜å’Œæ™ºèƒ½ä»»åŠ¡è°ƒåº¦ã€‚
                </div>
            </div>

        </div>
    </div>

    <script>
        const columnWidthSlider = document.getElementById('columnWidth');
        const widthValue = document.getElementById('widthValue');
        const columnCount = document.getElementById('columnCount');
        const content = document.getElementById('content');

        function updateColumns() {
            const columnWidth = parseInt(columnWidthSlider.value);
            const containerWidth = content.offsetWidth;
            const gap = 30; // column-gap value
            const columns = Math.max(1, Math.floor((containerWidth + gap) / (columnWidth + gap)));
            
            content.style.columnCount = columns;
            widthValue.textContent = columnWidth;
            columnCount.textContent = columns;
        }

        columnWidthSlider.addEventListener('input', updateColumns);
        window.addEventListener('resize', updateColumns);
        
        // Initial setup
        updateColumns();

        // æ·»åŠ ä»£ç å—é«˜äº®æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('.code-block');
            codeBlocks.forEach(block => {
                block.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.02)';
                });
                
                block.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html>
  
  
  
</body>

</html>