<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Commander.js å¼€å‘å‘½ä»¤é€ŸæŸ¥è¡¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../assets/variables.css">
    <link rel="stylesheet" href="../../assets/global.css">
  <link rel="stylesheet" href="../../assets/cheatsheet.css">
    <!-- Prism.js è¯­æ³•é«˜äº® -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        :root {
            --col-width: 520px;
            --gap: 16px;
        }
        .panel label {
            color: var(--panel-accent);
        }
        .panel .title {
            color: var(--panel-accent);
        }
    </style>

    <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
    <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
  </head>
<body>
    <div class="container">
        <div class="panel">
            <span style="color:#7bfbb7;font-size:16px;margin-right:auto;">Commander.js é€ŸæŸ¥è¡¨</span>
            <label for="columnWidth">ğŸ”§ è°ƒæ•´æ¯åˆ—å®½åº¦ï¼š</label>
            <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="340">
            <span id="widthVal" class="slider-val">340px</span>
        </div>
        <div class="cheat-columns" id="columns">
            
            <!-- Installation & Setup -->
            <div class="card">
                <h2>ğŸš€ å®‰è£…ä¸åˆå§‹åŒ– <a href="https://github.com/tj/commander.js#installation" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><code>npm install commander</code>ï¼šå®‰è£…</li>
                </ul>
                <h3>å£°æ˜å˜é‡</h3>
                <pre><code class="language-javascript">// CommonJS
const { program } = require('commander');

// æˆ–è€…åˆ›å»ºæœ¬åœ°å®ä¾‹
const { Command } = require('commander');
const program = new Command();

// TypeScript
import { Command } from 'commander';
const program = new Command();</code></pre>
            </div>

            <!-- Quick Start -->
            <div class="card">
                <h2>âš¡ å¿«é€Ÿå¼€å§‹ <a href="https://github.com/tj/commander.js#quick-start" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <pre><code class="language-javascript">const { program } = require('commander');

program
  .option('--first')
  .option('-s, --separator <char>');

program.parse();

const options = program.opts();
const limit = options.first ? 1 : undefined;
console.log(program.args[0].split(options.separator, limit));

// å…¥å£æ–‡ä»¶æ‰§è¡Œ, ç±»ä¼¼äºpythonçš„ __name__ === '__main__'
const __filename = fileURLToPath(import.meta.url);
const entryFile = process.argv[1];
if (path.resolve(__filename) === path.resolve(entryFile)) {
  // å®šä¹‰
}
</code></pre>
                <div class="desc">
                    è¿è¡Œ: <code>node split.js -s / --first a/b/c</code>
                </div>
            </div>

            <!-- Options - Basics -->
            <div class="card">
                <h2>âš™ï¸ åŸºç¡€é€‰é¡¹ <a href="https://github.com/tj/commander.js#options" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><code>.option(flags, description, [default])</code>ï¼šå®šä¹‰é€‰é¡¹</li>
                </ul>
                <pre><code class="language-javascript">program
  .option('-d, --debug', 'output extra debugging')
  .option('-s, --small', 'small pizza size')
  .option('-p, --pizza-type <type>', 'flavour of pizza');

const options = program.opts();
if (options.debug) console.log(options);</code></pre>
                <div class="desc">
                    <code>flags</code> å¯ä»¥åŒ…å«çŸ­æ ‡å¿—ï¼ˆ-dï¼‰å’Œé•¿åç§°ï¼ˆ--debugï¼‰ã€‚
                </div>
            </div>

            <!-- Options - Default Value -->
            <div class="card">
                <h2>âš™ï¸ é€‰é¡¹é»˜è®¤å€¼ <a href="https://github.com/tj/commander.js#default-option-value" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <pre><code class="language-javascript">program.option(
  '-c, --cheese <type>',
  'add the specified type of cheese',
  'blue' // é»˜è®¤å€¼
);</code></pre>
            </div>

            <!-- Options - Advanced -->
            <div class="card">
                <h2>ğŸ”§ é«˜çº§é€‰é¡¹ç±»å‹ <a href="https://github.com/tj/commander.js#other-option-types-negatable-boolean-and-booleanvalue" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>å–åå¸ƒå°”å€¼ (Negatable)</h3>
                <pre><code class="language-javascript">program.option('--no-sauce', 'Remove sauce');
// ä½¿ç”¨ --no-sauce æ—¶ï¼Œsauce å€¼ä¸º false</code></pre>
                <h3>å¿…å¡«é€‰é¡¹ (Required)</h3>
                <pre><code class="language-javascript">program.requiredOption('-c, --cheese <type>', 'pizza must have cheese');
// è‹¥æœªæä¾›ï¼Œç¨‹åºä¼šè‡ªåŠ¨æŠ¥é”™å¹¶é€€å‡º</code></pre>
                <h3>å˜é•¿å‚æ•° (Variadic)</h3>
                <pre><code class="language-javascript">program.option('-n, --number <numbers...>', 'specify numbers');
// è§£æç»“æœä¸ºæ•°ç»„: { number: ['1', '2', '3'] }</code></pre>
            </div>

            <!-- Options - Configuration -->
            <div class="card">
                <h2>ğŸ› ï¸ é€‰é¡¹é…ç½®ä¸å¤„ç† <a href="https://github.com/tj/commander.js#version-option" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>ç‰ˆæœ¬é€‰é¡¹</h3>
                <pre><code class="language-javascript">program.version('0.0.1', '-v, --vers', 'output current version');</code></pre>
                <h3>è‡ªå®šä¹‰å¤„ç†å‡½æ•°</h3>
                <pre><code class="language-javascript">function myParseInt(value, dummyPrevious) {
  return parseInt(value);
}

program.option('-i, --integer <number>', 'int arg', myParseInt);</code></pre>
                <h3>æ›´å¤šé…ç½® (Option å¯¹è±¡)</h3>
                <pre><code class="language-javascript">new Option('-t, --timeout <delay>', 'timeout in seconds')
  .default(60, 'one minute')
  .choices(['small', 'medium', 'large'])
  .env('PORT') // ä»ç¯å¢ƒå˜é‡è¯»å–
  .conflicts('port') // å†²çªæ£€æµ‹
  .implies({ drink: 'small' }) // éšå«é€‰é¡¹</code></pre>
            </div>

            <!-- Commands - Definition -->
            <div class="card">
                <h2>ğŸ“¦ å®šä¹‰å‘½ä»¤ <a href="https://github.com/tj/commander.js#commands" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><code>.command('name <args>')</code>ï¼šå®šä¹‰å‘½ä»¤</li>
                    <li><code>.action(fn)</code>ï¼šå‘½ä»¤å¤„ç†å‡½æ•°</li>
                </ul>
                <pre><code class="language-javascript">program
  .command('clone <source> [destination]')
  .description('clone a repository')
  .action((source, destination) => {
    console.log('cloning ' + source);
  });</code></pre>
                <h3>å‚æ•°è¯­æ³•</h3>
                <ul>
                    <li><code>&lt;required&gt;</code>ï¼šå¿…å¡«å‚æ•°</li>
                    <li><code>[optional]</code>ï¼šå¯é€‰å‚æ•°</li>
                    <li><code>variadic...</code>ï¼šå˜é•¿å‚æ•°ï¼ˆåªèƒ½æ˜¯æœ€åä¸€ä¸ªï¼‰</li>
                </ul>
            </div>

            <!-- Commands - Independent -->
            <div class="card">
                <h2>ğŸ“‚ ç‹¬ç«‹å¯æ‰§è¡Œå­å‘½ä»¤ <a href="https://github.com/tj/commander.js#stand-alone-executable-subcommands" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <div class="desc">å½“ command() å¸¦æœ‰æè¿°å‚æ•°æ—¶ï¼ŒCommander ä¼šå°†å…¶è§†ä¸ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ã€‚</div>
                <pre><code class="language-javascript">program
  .command('install [package-names...]', 'install packages')
  .command('search [query]', 'search with optional query');</code></pre>
                <div class="desc">
                    ä¼šè‡ªåŠ¨å¯»æ‰¾ <code>pm-install</code>, <code>pm-search</code> ç­‰æ–‡ä»¶æ‰§è¡Œã€‚
                </div>
            </div>

            <!-- Commands - Arguments -->
            <div class="card">
                <h2>ğŸ“ å‘½ä»¤å‚æ•°è¯¦è§£ <a href="https://github.com/tj/commander.js#command-arguments" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>ä½¿ç”¨ .argument()</h3>
                <pre><code class="language-javascript">program
  .version('0.1.0')
  .argument('<username>', 'user to login')
  .argument('[password]', 'password', 'default')
  .action((username, password) => {
    // ...
  });</code></pre>
                <h3>è‡ªå®šä¹‰å‚æ•°å¤„ç†</h3>
                <pre><code class="language-javascript">program
  .command('add')
  .argument('<first>', 'integer', myParseInt)
  .action((first) => { /* ... */ });</code></pre>
            </div>

            <!-- Hooks -->
            <div class="card">
                <h2>ğŸª ç”Ÿå‘½å‘¨æœŸé’©å­ <a href="https://github.com/tj/commander.js#life-cycle-hooks" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><code>preAction</code>ï¼šActionå¤„ç†å‰</li>
                    <li><code>postAction</code>ï¼šActionå¤„ç†å</li>
                </ul>
                <pre><code class="language-javascript">program
  .option('-t, --trace', 'display trace')
  .hook('preAction', (thisCommand, actionCommand) => {
    if (thisCommand.opts().trace) {
      console.log('About to call action handler');
    }
  });</code></pre>
            </div>

            <!-- Help System -->
            <div class="card">
                <h2>â“ å¸®åŠ©ç³»ç»Ÿ <a href="https://github.com/tj/commander.js#automated-help" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>è‡ªå®šä¹‰å¸®åŠ©å†…å®¹</h3>
                <pre><code class="language-javascript">program.addHelpText('after', `
Example call:
  $ custom-help --help`);</code></pre>
                <h3>é”™è¯¯åæ˜¾ç¤ºå¸®åŠ©</h3>
                <pre><code class="language-javascript">program.showHelpAfterError('(add --help for additional information)');</code></pre>
                <h3>ä»£ç ä¸­æ˜¾ç¤ºå¸®åŠ©</h3>
                <ul>
                    <li><code>program.help()</code>: æ˜¾ç¤ºå¹¶é€€å‡º</li>
                    <li><code>program.outputHelp()</code>: ä»…æ˜¾ç¤º</li>
                </ul>
            </div>

            <!-- Configuration -->
            <div class="card">
                <h2>âš™ï¸ ç¨‹åºé…ç½® <a href="https://github.com/tj/commander.js#name" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <pre><code class="language-javascript">program
  .name("my-command")
  .usage("[global options] command")
  .description("CLI description")
  .summary("short summary"); // ç”¨äºå­å‘½ä»¤åˆ—è¡¨</code></pre>
                <h3>è‡ªå®šä¹‰å¸®åŠ©é€‰é¡¹/å‘½ä»¤</h3>
                <pre><code class="language-javascript">program.helpOption('-e, --HELP', 'read more info');
program.helpCommand('assist [command]', 'show assistance');</code></pre>
            </div>

            <!-- Parsing -->
            <div class="card">
                <h2>â–¶ï¸ è§£æä¸æ‰§è¡Œ <a href="https://github.com/tj/commander.js#parse-and-parseasync" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>åŒæ­¥è§£æ</h3>
                <pre><code class="language-javascript">program.parse(); // é»˜è®¤è§£æ process.argv
program.parse(process.argv); // æ˜¾å¼ä¼ é€’
program.parse(['-f', 'filename'], { from: 'user' });</code></pre>
                <h3>å¼‚æ­¥è§£æ</h3>
                <pre><code class="language-javascript">await program.parseAsync(process.argv);</code></pre>
                <div class="desc">å¦‚æœæœ‰ async action handlerï¼Œå¿…é¡»ä½¿ç”¨ parseAsyncã€‚</div>
            </div>

            <!-- Error Handling -->
            <div class="card">
                <h2>âš ï¸ é”™è¯¯ä¸è¾“å‡ºæ§åˆ¶ <a href="https://github.com/tj/commander.js#override-exit-and-output-handling" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>è‡ªå®šä¹‰é”™è¯¯</h3>
                <pre><code class="language-javascript">program.error('Password must be longer than four characters');</code></pre>
                <h3>è¦†ç›–é€€å‡ºè¡Œä¸º</h3>
                <pre><code class="language-javascript">program.exitOverride(); // æŠ›å‡ºé”™è¯¯è€Œä¸æ˜¯ç›´æ¥é€€å‡º
try {
  program.parse(process.argv);
} catch (err) {
  // handle error
}</code></pre>
                <h3>è‡ªå®šä¹‰è¾“å‡º</h3>
                <pre><code class="language-javascript">program.configureOutput({
  writeOut: (str) => process.stdout.write(`[OUT] ${str}`),
  writeErr: (str) => process.stdout.write(`[ERR] ${str}`),
  outputError: (str, write) => write(`\x1b[31m${str}\x1b[0m`)
});</code></pre>
            </div>

        </div>
    </div>
    <script src="../../assets/common.js"></script>
    <script>
        // Prism.js ä»£ç é«˜äº®åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                Prism.highlightAll();
                Prism.plugins.lineNumbers = false;
                console.log('ä»£ç é«˜äº®å·²å¯ç”¨');
            }
        });
    </script>
</body>
</html>