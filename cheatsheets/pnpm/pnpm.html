<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>pnpm åŒ…ç®¡ç†ä¸å·¥ä½œåŒºé€ŸæŸ¥è¡¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../css/variables.css">
  <link rel="stylesheet" href="../../css/common.css">
  <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
  <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
  <style>
    :root {
      /* æ§åˆ¶å¤šåˆ—å¸ƒå±€çš„åˆ—å®½ä¸é—´è·ï¼ˆä¸ _example æ¨¡æ¿ä¿æŒä¸€è‡´ï¼‰ */
      --col-width: 340px;
      --gap: 16px;
    }

    .panel label {
      color: var(--panel-accent);
    }

    .panel .title {
      color: var(--panel-accent);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="panel">
      <span class="title">ğŸš€ pnpm åŒ…ç®¡ç†ä¸å·¥ä½œåŒºé€ŸæŸ¥è¡¨</span>
      <label for="columnWidth">ğŸ”§ è°ƒæ•´æ¯åˆ—å®½åº¦ï¼š</label>
      <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="340">
      <span id="widthVal" class="slider-val">340px</span>
    </div>

    <div class="cheat-columns" id="columns">
      <div class="card">
        <h2>ğŸ“¦ åŸºç¡€å‘½ä»¤ä¸åˆå§‹åŒ– <a href="https://pnpm.io/cli" title="pnpm CLI æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm -v</code> | æŸ¥çœ‹ pnpm ç‰ˆæœ¬</li>
          <li><code>pnpm help</code> | æ˜¾ç¤ºå¸®åŠ©æ€»è§ˆ</li>
          <li><code>pnpm init</code> | åˆå§‹åŒ– package.json</li>
          <li><code>pnpm install</code> | æŒ‰é”æ–‡ä»¶/ä¾èµ–å®‰è£…é¡¹ç›®ä¾èµ–</li>
          <li><code>pnpm install --frozen-lockfile</code> | ä¸¥æ ¼æŒ‰é”æ–‡ä»¶å®‰è£…</li>
        </ul>
        <h3>å¸¸ç”¨ç¯å¢ƒä¿¡æ¯</h3>
        <pre>pnpm config list      # æŸ¥çœ‹é…ç½®
pnpm root -g          # å…¨å±€ node_modules ç›®å½•
pnpm store path        # æŸ¥çœ‹å…±äº«ä¾èµ– store è·¯å¾„</pre>
        <div class="desc">å…ˆç¡®è®¤ pnpm ç‰ˆæœ¬ä¸ store è·¯å¾„ï¼Œæ–¹ä¾¿æ’æŸ¥ç¼“å­˜ä¸ä¾èµ–é—®é¢˜ã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ“¥ å®‰è£…ä¸ç§»é™¤ä¾èµ– <a href="https://pnpm.io/cli/add" title="pnpm add æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm add &lt;pkg&gt;</code> | å®‰è£…åˆ° dependencies</li>
          <li><code>pnpm add -D &lt;pkg&gt;</code> | å®‰è£…åˆ° devDependencies</li>
          <li><code>pnpm add -g &lt;pkg&gt;</code> | å…¨å±€å®‰è£… CLI å·¥å…·</li>
          <li><code>pnpm add &lt;pkg&gt;@&lt;version&gt;</code> | å®‰è£…æŒ‡å®šç‰ˆæœ¬</li>
          <li><code>pnpm add &lt;pkg&gt;@latest</code> | å®‰è£…æœ€æ–°ç‰ˆæœ¬</li>
          <li><code>pnpm remove &lt;pkg&gt;</code> | ç§»é™¤ä¾èµ–</li>
        </ul>
        <h3>é”æ–‡ä»¶ä¸é‡è£…</h3>
        <pre># å…¨é‡é‡è£…ä¾èµ–
rm -rf node_modules pnpm-lock.yaml
pnpm install</pre>
        <div class="desc">pnpm ä½¿ç”¨ç¡¬é“¾æ¥å¤ç”¨ä¾èµ–ï¼Œé‡è£…æ—¶æ³¨æ„ä¿ç•™æˆ–é‡æ–°ç”Ÿæˆé”æ–‡ä»¶ã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ› ï¸ ä¾èµ–æ›´æ–°ä¸è¯Šæ–­ <a href="https://pnpm.io/cli/update" title="pnpm update æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm outdated</code> | æŸ¥çœ‹å¯æ›´æ–°ä¾èµ–</li>
          <li><code>pnpm update</code> | æŒ‰ semver èŒƒå›´æ›´æ–°</li>
          <li><code>pnpm update &lt;pkg&gt;</code> | æ›´æ–°æŒ‡å®šä¾èµ–</li>
          <li><code>pnpm list</code> | æŸ¥çœ‹ä¾èµ–æ ‘</li>
          <li><code>pnpm why &lt;pkg&gt;</code> | æŸ¥çœ‹ä¾èµ–è¢«è°å¼•ç”¨</li>
        </ul>
        <h3>å¸¸è§æ’æŸ¥å‘½ä»¤</h3>
        <pre># æŸ¥çœ‹æŸåŒ…åœ¨æ ‘ä¸­çš„ä½ç½®
pnpm list lodash

# åˆ†æé‡å¤ç‰ˆæœ¬
pnpm why react</pre>
        <div class="desc">ç»“åˆ outdated / list / why åˆ†æå‡çº§å½±å“ï¼Œé¿å…å¤šç‰ˆæœ¬ä¾èµ–å†²çªã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ“œ è„šæœ¬æ‰§è¡Œä¸ CLI å·¥å…· <a href="https://pnpm.io/cli/run" title="pnpm run / exec / dlx æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm run &lt;script&gt;</code> | è¿è¡Œ package.json è„šæœ¬</li>
          <li><code>pnpm test</code> | ç­‰ä»·äº <code>pnpm run test</code></li>
          <li><code>pnpm start</code> | ç­‰ä»·äº <code>pnpm run start</code></li>
          <li><code>pnpm exec &lt;cmd&gt;</code> | åœ¨æœ¬åœ°ä¾èµ–ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå‘½ä»¤</li>
          <li><code>pnpm dlx &lt;pkg&gt;</code> | ç±»ä¼¼ npx çš„ä¸€æ¬¡æ€§æ‰§è¡Œ</li>
        </ul>
        <h3>è„šæ‰‹æ¶ä¸å·¥å…·ç¤ºä¾‹</h3>
        <pre># ä½¿ç”¨ pnpm dlx åˆ›å»ºé¡¹ç›®
pnpm dlx create-vite my-app
pnpm dlx create-next-app my-app

# åœ¨ä¾èµ–ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ CLI
pnpm exec eslint src --fix
pnpm exec jest</pre>
        <div class="desc">pnpm dlx/exec ç»“åˆ lockfileï¼Œä¿è¯è„šæœ¬æ‰§è¡Œçš„ä¾èµ–æ¥æºå¯æ§ä¸”å¯å¤ç°ã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ—ï¸ å·¥ä½œåŒºä¸å¤šåŒ…ä»“åº“ <a href="https://pnpm.io/workspaces" title="pnpm workspaces æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm-workspace.yaml</code> | å£°æ˜å·¥ä½œåŒºæ ¹é…ç½®</li>
          <li><code>pnpm install -r</code> | åœ¨æ‰€æœ‰ workspace ä¸­å®‰è£…</li>
          <li><code>pnpm run &lt;script&gt; -r</code> | åœ¨æ‰€æœ‰ workspace é€’å½’è¿è¡Œè„šæœ¬</li>
          <li><code>pnpm -r test</code> | ç®€å†™å½¢å¼é€’å½’æ‰§è¡Œ test</li>
          <li><code>pnpm --filter &lt;pattern&gt; ...</code> | ä»…åœ¨ç­›é€‰çš„ workspace è¿è¡Œ</li>
        </ul>
        <h3>pnpm-workspace.yaml ç¤ºä¾‹</h3>
        <pre>packages:
  - "packages/*"
  - "apps/*"

catalog:
  react: ^18.0.0
  typescript: ^5.0.0</pre>
        <div class="desc">é€šè¿‡ workspaces ä¸ filter ç»„åˆï¼Œå¯ä»¥ç²¾ç»†æ§åˆ¶å¤šåŒ…ä»“åº“çš„å®‰è£…ä¸è„šæœ¬æ‰§è¡ŒèŒƒå›´ã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ” è¿‡æ»¤ä¸é€’å½’æ‰§è¡Œ <a href="https://pnpm.io/filtering" title="filter / recursive æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm run build -r</code> | å¯¹æ‰€æœ‰ workspace æ‰§è¡Œ build</li>
          <li><code>pnpm run test --filter app-*</code> | ä»…å¯¹åŒ¹é…åç§°çš„ workspace æ‰§è¡Œ</li>
          <li><code>pnpm run lint --filter ./packages/utils</code> | æŒ‰è·¯å¾„ç­›é€‰ workspace</li>
          <li><code>pnpm run dev --filter \"...[depends-on]\"</code> | æŒ‰ä¾èµ–å…³ç³»ç­›é€‰</li>
        </ul>
        <h3>å…¸å‹å·¥ä½œæµç¤ºä¾‹</h3>
        <pre># åªæ„å»ºæŸä¸€å±‚ä¾èµ–
pnpm run build --filter ui-*

# å…ˆæ„å»ºè¢«ä¾èµ–åŒ…ï¼Œå†æ„å»ºåº”ç”¨
pnpm run build --filter \"...[depends-on @acme/ui]\"</pre>
        <div class="desc">filter è¯­æ³•æ˜¯ pnpm å·¥ä½œåŒºçš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ”¯æŒæŒ‰åç§°ã€è·¯å¾„ä¸ä¾èµ–å…³ç³»ç»„åˆç­›é€‰ã€‚</div>
      </div>

      <div class="card">
        <h2>ğŸ—ƒï¸ Store ä¸ç¼“å­˜ç®¡ç† <a href="https://pnpm.io/npmrc#store-dir" title="store é…ç½®æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>pnpm store path</code> | æŸ¥çœ‹å½“å‰ store è·¯å¾„</li>
          <li><code>pnpm store status</code> | æ£€æŸ¥ store çŠ¶æ€</li>
          <li><code>pnpm store prune</code> | åˆ é™¤æœªè¢«ä»»ä½•é¡¹ç›®å¼•ç”¨çš„åŒ…</li>
          <li><code>pnpm config set store-dir &lt;path&gt;</code> | ä¿®æ”¹ store ç›®å½•</li>
        </ul>
        <h3>å…¸å‹é—®é¢˜å¤„ç†</h3>
        <pre># store æŸåæˆ–ç©ºé—´ä¸è¶³æ—¶
pnpm store status
pnpm store prune

# å°† store ç§»åŠ¨åˆ°å¤§å®¹é‡ç£ç›˜
pnpm config set store-dir D:\\pnpm-store</pre>
        <div class="desc">pnpm å°†ä¾èµ–é›†ä¸­å­˜å‚¨åœ¨ store ä¸­ï¼Œé€šè¿‡ prune ä¸é‡å®šå‘è·¯å¾„å¯å…¼é¡¾æ€§èƒ½ä¸ç©ºé—´ã€‚</div>
      </div>
    </div>
  </div>

  <!-- ç»Ÿä¸€ä½¿ç”¨å…¬å…±è„šæœ¬ç®¡ç†åˆ—å®½æ»‘å—é€»è¾‘ -->
  <script src="../../assets/common.js"></script>
</body>
</html>
