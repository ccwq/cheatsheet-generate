<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Pino æ—¥å¿—åº“é€ŸæŸ¥è¡¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../assets/variables.css">
    <link rel="stylesheet" href="../../assets/global.css">
    <link rel="stylesheet" href="../../assets/cheatsheet.css">

    <!-- Prism.js è¯­æ³•é«˜äº® -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <style>
        :root {
            --col-width: 400px;
            --gap: 16px;
        }

        .panel label {
            color: var(--panel-accent);
        }

        .panel .title {
            color: var(--panel-accent);
        }
    </style>

    <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
    <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
</head>
<body>
    <div class="container">
        <div class="panel">
            <span class="title">Pino æ—¥å¿—åº“é€ŸæŸ¥è¡¨</span>
<!-- META_INFO_START -->
<div class="meta-info">
  <span class="meta-item"><span class="meta-label">ç‰ˆæœ¬</span><span class="meta-value">unknown</span></span>
  <span class="meta-item"><span class="meta-label">æ›´æ–°æ—¥å¿—</span><span class="meta-value">2026-01-28</span></span>
  <span class="meta-item"><span class="meta-label">GitHub</span><span class="meta-value"><a class="meta-link" href="https://github.com/pinojs/pino" target="_blank" rel="noopener">pinojs/pino</a></span></span>
</div>
<!-- META_INFO_END -->

            <label for="columnWidth">ğŸ”§ è°ƒæ•´æ¯åˆ—å®½åº¦ï¼š</label>
            <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="360">
            <span id="widthVal" class="slider-val">360px</span>
        </div>

        <div class="cheat-columns" id="columns">
            <div class="card">
                <h2>ğŸ”° åŸºç¡€åˆ›å»ºä¸æ—¥å¿—æ–¹æ³• <a href="https://github.com/pinojs/pino/blob/main/docs/api.md#pinooptions-destination--logger" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>åˆ›å»º logger</h3>
                <pre><code class="language-javascript">// åˆ›å»ºé»˜è®¤ loggerï¼ˆstdoutï¼‰
const pino = require('pino')
const logger = pino()

// ä¼ å…¥ options + destination
const fileLogger = pino({ name: 'api' }, pino.destination('./logs/app.log'))</code></pre>
                <h3>å¸¸ç”¨æ—¥å¿—æ–¹æ³•</h3>
                <pre><code class="language-javascript">// åŸºç¡€çº§åˆ«ï¼štrace/debug/info/warn/error/fatal
logger.info('hello')
logger.error({ err }, 'request failed')

// æ’å€¼å‚æ•°
logger.info('hello %s %d', 'world', 42)</code></pre>
                <div class="desc">é»˜è®¤è¾“å‡º NDJSONï¼›fatal ä¼šå¼ºåˆ¶åŒæ­¥ flushã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸšï¸ æ—¥å¿—çº§åˆ«ä¸è‡ªå®šä¹‰çº§åˆ« <a href="https://github.com/pinojs/pino/blob/main/docs/api.md#logger-level" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>æ ¸å¿ƒçº§åˆ«ä¸é˜ˆå€¼</h3>
                <ul>
                    <li><span class="highlight">trace=10</span> â†’ debug=20 â†’ info=30 â†’ warn=40 â†’ error=50 â†’ fatal=60</li>
                    <li><span class="highlight">silent=Infinity</span>ï¼šç¦ç”¨å…¨éƒ¨æ—¥å¿—</li>
                </ul>
                <h3>åŠ¨æ€è°ƒæ•´çº§åˆ«</h3>
                <pre><code class="language-javascript">// è®¾ç½®æœ€å°è¾“å‡ºçº§åˆ«
logger.level = 'debug'

// åˆ¤æ–­çº§åˆ«æ˜¯å¦å¯ç”¨
if (logger.isLevelEnabled('trace')) {
  logger.trace('heavy trace')
}</code></pre>
                <h3>è‡ªå®šä¹‰çº§åˆ«</h3>
                <pre><code class="language-javascript">// è‡ªå®šä¹‰çº§åˆ« + åªä½¿ç”¨è‡ªå®šä¹‰çº§åˆ«
const logger = pino({
  customLevels: { audit: 35, security: 45 },
  useOnlyCustomLevels: false
})</code></pre>
            </div>

            <div class="card">
                <h2>ğŸ§© ç»“æ„åŒ–å­—æ®µä¸æ ¼å¼åŒ– <a href="https://github.com/pinojs/pino/blob/main/docs/api.md#formatters-object" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>formatters / serializers</h3>
                <pre><code class="language-javascript">// è‡ªå®šä¹‰ level / bindings / log æ ¼å¼
const logger = pino({
  formatters: {
    level (label, number) {
      return { level: number, levelLabel: label }
    },
    bindings (bindings) {
      return { pid: bindings.pid }
    },
    log (obj) {
      return { ...obj, service: 'edge' }
    }
  },
  serializers: {
    err: pino.stdSerializers.err
  }
})</code></pre>
                <h3>å­—æ®µé”®åæ§åˆ¶</h3>
                <pre><code class="language-javascript">const logger = pino({
  messageKey: 'msg',
  errorKey: 'err',
  nestedKey: 'payload'
})</code></pre>
                <div class="desc">nestedKey å¯é¿å…ä¸ level/time ç­‰å†…ç½®å­—æ®µå†²çªã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§µ å­æ—¥å¿—ä¸ç»‘å®š <a href="https://github.com/pinojs/pino/blob/main/docs/child-loggers.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>åˆ›å»º child logger</h3>
                <pre><code class="language-javascript">// åœ¨æ¯æ¡æ—¥å¿—æ³¨å…¥å›ºå®šä¸Šä¸‹æ–‡
const child = logger.child({ module: 'user' })
child.info('loaded')</code></pre>
                <h3>bindings æ“ä½œ</h3>
                <pre><code class="language-javascript">// è¯»å–å½“å‰ç»‘å®š
const bindings = child.bindings()

// è¿½åŠ ç»‘å®šï¼ˆä¸è¦†ç›–ï¼‰
child.setBindings({ requestId: 'req-1' })</code></pre>
                <div class="warning">âš ï¸ çˆ¶å­é‡å¤ key ä¼šåœ¨ NDJSON ä¸­å‡ºç°é‡å¤å­—æ®µï¼Œè§£ææ—¶ä»¥æœ€åä¸€æ¬¡ä¸ºå‡†ã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§¼ Redaction æ•°æ®è„±æ• <a href="https://github.com/pinojs/pino/blob/main/docs/redaction.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>è·¯å¾„è¯­æ³•ä¸é®ç½©</h3>
                <pre><code class="language-javascript">const logger = pino({
  redact: {
    paths: ['user.password', 'card["cvv"]', 'items[*].secret'],
    censor: '[Redacted]'
  }
})</code></pre>
                <h3>ç§»é™¤å­—æ®µ</h3>
                <pre><code class="language-javascript">const logger = pino({
  redact: {
    paths: ['token'],
    remove: true
  }
})</code></pre>
                <div class="desc">æ”¯æŒ * é€šé…ï¼›è·¯å¾„åŒºåˆ†å¤§å°å†™ï¼›æµè§ˆå™¨ç¯å¢ƒä¸æ”¯æŒ redactionã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ—‚ï¸ Destination ä¸å¼‚æ­¥å†™å…¥ <a href="https://github.com/pinojs/pino/blob/main/docs/asynchronous.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>å¼‚æ­¥å†™å…¥ä¸ flush</h3>
                <pre><code class="language-javascript">const pino = require('pino')
const dest = pino.destination({
  dest: './logs/app.log',
  minLength: 4096,
  sync: false
})
const logger = pino(dest)

// å®šæœŸ flush ç¼“å†²
logger.flush()</code></pre>
                <div class="warning">âš ï¸ å¼‚æ­¥æ¨¡å¼å¯èƒ½ä¸¢å¤±æœ€è¿‘ç¼“å†²æ—¥å¿—ï¼›Lambda ç­‰ç¯å¢ƒéœ€è°¨æ…ã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸšš Transports ä¸ç®¡é“ <a href="https://github.com/pinojs/pino/blob/main/docs/transports.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>å¤šç›®æ ‡è¾“å‡º</h3>
                <pre><code class="language-javascript">const transport = pino.transport({
  targets: [
    { level: 'info', target: 'pino-pretty' },
    { level: 'error', target: 'pino/file', options: { destination: './logs/error.log' } }
  ]
})
const logger = pino(transport)</code></pre>
                <h3>Pipeline</h3>
                <pre><code class="language-javascript">const transport = pino.transport({
  pipeline: [
    { target: 'pino-syslog' },
    { target: 'pino-socket' }
  ]
})</code></pre>
                <div class="desc">transport å†…éƒ¨ä½¿ç”¨ worker threadï¼›error äº‹ä»¶åº”è§†ä¸ºè‡´å‘½é”™è¯¯ã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§¯ Pretty Printing <a href="https://github.com/pinojs/pino/blob/main/docs/pretty.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>ä½¿ç”¨ pino-pretty</h3>
                <pre><code class="language-javascript">const logger = pino({
  transport: {
    target: 'pino-pretty',
    options: { colorize: true }
  }
})</code></pre>
                <div class="desc">ç”Ÿäº§æ¨è NDJSONï¼Œå¼€å‘é˜¶æ®µå¯å¯ç”¨ prettifierã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸŒ Browser API <a href="https://github.com/pinojs/pino/blob/main/docs/browser.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>å¸¸ç”¨é€‰é¡¹</h3>
                <pre><code class="language-javascript">const logger = pino({
  browser: {
    asObject: true,
    asObjectBindingsOnly: false,
    reportCaller: true,
    serialize: ['custom'],
    write: (obj) => {
      // è‡ªå®šä¹‰è¾“å‡º
    }
  }
})</code></pre>
                <h3>transmit</h3>
                <pre><code class="language-javascript">const logger = pino({
  browser: {
    transmit: {
      level: 'warn',
      send (level, logEvent) {
        // å‘é€åˆ°é‡‡é›†ç«¯
      }
    }
  }
})</code></pre>
                <div class="desc">æµè§ˆå™¨é»˜è®¤æ˜ å°„åˆ° console æ–¹æ³•ï¼›å¯ç¦ç”¨ loggingã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§° Web æ¡†æ¶æ¥å…¥ <a href="https://github.com/pinojs/pino/blob/main/docs/web.md#web-frameworks" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>Fastifyï¼ˆå†…ç½®ï¼‰</h3>
                <pre><code class="language-javascript">const fastify = require('fastify')({ logger: true })
fastify.get('/', async (req, reply) => {
  req.log.info('request')
  return { ok: true }
})</code></pre>
                <h3>Express / Node httpï¼ˆpino-httpï¼‰</h3>
                <pre><code class="language-javascript">const pinoHttp = require('pino-http')()
app.use(pinoHttp)
app.get('/', (req, res) => {
  req.log.info('hit')
  res.end('ok')
})</code></pre>
                <div class="desc">Hapi/Koa/Restify/Nest/H3/Hono å‡æœ‰å®˜æ–¹æˆ–ç¤¾åŒºä¸­é—´ä»¶æ”¯æŒã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§ª Diagnostics è§‚æµ‹ <a href="https://github.com/pinojs/pino/blob/main/docs/diagnostics.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>tracing channel äº‹ä»¶</h3>
                <pre><code class="language-javascript">const dc = require('diagnostics_channel')

const start = dc.channel('tracing:pino_asJson:start')
const end = dc.channel('tracing:pino_asJson:end')

start.subscribe((message) => {
  // message.instance / message.arguments
})

end.subscribe((message) => {
  // message.result
})</code></pre>
                <div class="desc">ç”¨äºè§‚æµ‹åºåˆ—åŒ–ä¸å†™å…¥é“¾è·¯çš„å†…éƒ¨çŠ¶æ€ã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§­ Help / è¿ç»´æŠ€å·§ <a href="https://github.com/pinojs/pino/blob/main/docs/help.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>æ—¥å¿—è¿‡æ»¤</h3>
                <pre><code class="language-bash"># ä»…ç­›é€‰ ERROR çº§åˆ«
node app.js | jq 'select(.level == 50)'</code></pre>
                <h3>æ—¥å¿—è½®è½¬ï¼ˆSIGHUP reopenï¼‰</h3>
                <pre><code class="language-javascript">const fs = require('node:fs')
const pino = require('pino')

fs.writeFileSync('/var/run/myapp.pid', process.pid)
const dest = pino.destination('/var/log/myapp.log')
const logger = pino(dest)

process.on('SIGHUP', () => dest.reopen())</code></pre>
                <div class="desc">å¯é…åˆ logrotate postrotate è§¦å‘ reopenã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ“ˆ æ€§èƒ½ä¸åŸºå‡† <a href="https://github.com/pinojs/pino/blob/main/docs/benchmarks.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><span class="highlight">é¿å…åŒæ­¥æ ¼å¼åŒ–æ—¶é—´</span>ï¼šè‡ªå®šä¹‰ timestamp ä¼šæ˜æ˜¾å½±å“æ€§èƒ½</li>
                    <li><span class="highlight">æ‰¹é‡å†™å…¥</span>ï¼šä½¿ç”¨å¼‚æ­¥ destination æå‡åå</li>
                    <li><span class="highlight">è°¨æ…ä½¿ç”¨é€šé… redaction</span>ï¼šé€šé…è·¯å¾„ä¼šå¢åŠ å¼€é”€</li>
                </ul>
                <div class="desc">åŸºå‡†æµ‹è¯•æ˜¾ç¤º Pino åœ¨å­—ç¬¦ä¸²ä¸å¯¹è±¡æ—¥å¿—ä¸Šå…·æœ‰è¾ƒä½å»¶è¿Ÿã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ§© ç”Ÿæ€ä¸æ‰©å±• <a href="https://github.com/pinojs/pino/blob/main/docs/ecosystem.md" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <ul>
                    <li><span class="highlight">pino-http</span>ï¼šHTTP è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶</li>
                    <li><span class="highlight">express-pino-logger</span> / koa-pino-logger</li>
                    <li><span class="highlight">pino-pretty</span>ï¼šå¼€å‘æ—¥å¿—ç¾åŒ–</li>
                    <li><span class="highlight">pino-std-serializers</span>ï¼šæ ‡å‡†åºåˆ—åŒ–å™¨</li>
                    <li><span class="highlight">pino-elasticsearch</span> / pino-syslog</li>
                </ul>
                <div class="desc">Core ä¸ Community ç”Ÿæ€æ¨¡å—è¦†ç›–ä¸»æµæ¡†æ¶ä¸æ—¥å¿—åç«¯ã€‚</div>
            </div>

            <div class="card">
                <h2>ğŸ•’ LTS ä¸æ”¯æŒçŸ©é˜µ <a href="https://github.com/pinojs/pino/blob/main/docs/lts.md#long-term-support" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>>></a></h2>
                <h3>ä¸»è¦ LTS çº¿</h3>
                <ul>
                    <li><span class="highlight">9.x</span>ï¼š2024-04-26 å‘å¸ƒï¼ŒNode.js 18/20/22</li>
                    <li><span class="highlight">8.x</span>ï¼š2022-06-01 å‘å¸ƒï¼ŒLTS è‡³ 2024-10-26</li>
                </ul>
                <div class="desc">å®‰å…¨æ›´æ–°å¯èƒ½ä»¥ minor ç‰ˆæœ¬å‘å¸ƒï¼Œéœ€å…³æ³¨ release notesã€‚</div>
            </div>
        </div>
    </div>

    <script src="../../assets/common.js"></script>
    <script>
    // Prism.js ä»£ç é«˜äº®åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function () {
        if (window.Prism) {
            Prism.highlightAll()
        }
    })
    </script>
</body>
</html>
