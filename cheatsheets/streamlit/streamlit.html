<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Streamlit å¼€å‘å‘½ä»¤é€ŸæŸ¥è¡¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../assets/variables.css">
    <link rel="stylesheet" href="../../assets/global.css">
    <link rel="stylesheet" href="../../assets/cheatsheet.css">

    <!-- Prism.js è¯­æ³•é«˜äº® -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <style>
        :root {
            --col-width: 400px;
            --gap: 16px;
        }
        .panel label { color: var(--panel-accent); }
        .panel .title { color: var(--panel-accent); }
    </style>

    <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
    <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
  </head>
<body>
    <div class="container">
        <div class="panel">
            <span class="title">Streamlit æé€ŸæŸ¥</span>
            <!-- META_INFO_START -->
            <div class="meta-info">
                <span class="meta-item"><span class="meta-label">ç‰ˆæœ¬</span><span class="meta-value">v1.54.0</span></span>
                <span class="meta-item"><span class="meta-label">æ›´æ–°æ—¥å¿—</span><span class="meta-value">2026-02-07</span></span>
                <span class="meta-item"><span class="meta-label">GitHub</span><span class="meta-value"><a class="meta-link" href="https://github.com/streamlit/streamlit" target="_blank" rel="noopener">streamlit/streamlit</a></span></span>
            </div>
            <!-- META_INFO_END -->
            <label for="columnWidth">ğŸ”§ åˆ—å®½ï¼š</label>
            <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="340">
            <span id="widthVal" class="slider-val">340px</span>
        </div>

        <div class="cheat-columns" id="columns">

            <!-- 1. è¿è¡Œæ¨¡å‹ä¸é¡µé¢éª¨æ¶ -->
            <div class="card">
                <h2>ğŸ—ï¸ è¿è¡Œæ¨¡å‹ä¸éª¨æ¶ <a href="https://docs.streamlit.io/get-started/fundamentals/main-concepts" title="æ ¸å¿ƒæ¦‚å¿µ" target="_blank">>>></a></h2>
                <div class="desc">ç†è§£â€œè‡ªä¸Šè€Œä¸‹â€é‡è·‘é€»è¾‘æ˜¯å…¥é—¨å…³é”®</div>
                <ul>
                    <li><code>st.set_page_config</code>: å¿…é¡»åœ¨é¦–è¡Œè°ƒç”¨ï¼Œé…ç½®æ ‡é¢˜ã€å¸ƒå±€ã€ä¾§è¾¹æ ã€‚</li>
                    <li><strong>é‡è·‘æœºåˆ¶</strong>: ä»»ä½• widget äº¤äº’æˆ–ä»£ç ä¿å­˜ï¼Œè„šæœ¬éƒ½ä¼šä»å¤´æ‰§è¡Œã€‚</li>
                    <li><code>st.stop()</code>: æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œä¸­æ–­åç»­ä»£ç æ‰§è¡Œã€‚</li>
                    <li><code>st.rerun()</code>: ç«‹åˆ»æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡è„šæœ¬é‡è·‘ã€‚</li>
                </ul>
                <pre><code class="language-python">import streamlit as st

# å¿…é¡»æ”¾åœ¨è„šæœ¬ç¬¬ä¸€è¡Œ
st.set_page_config(
    page_title="ä»ªè¡¨ç›˜",
    layout="wide",
    initial_sidebar_state="expanded"
)</code></pre>
            </div>

            <!-- 2. è¾“å…¥æ§ä»¶ Widgets -->
            <div class="card">
                <h2>ğŸ”˜ è¾“å…¥æ§ä»¶ Widgets <a href="https://docs.streamlit.io/develop/api-reference/widgets" title="æ§ä»¶å‚è€ƒ" target="_blank">>>></a></h2>
                <div class="desc">ç»„ä»¶è¿”å›å€¼å³ä¸ºå½“å‰çŠ¶æ€å€¼</div>
                <ul>
                    <li>å¸¸ç”¨æ§ä»¶: <code>st.button</code>, <code>st.checkbox</code>, <code>st.radio</code>, <code>st.selectbox</code>, <code>st.multiselect</code>, <code>st.slider</code>, <code>st.text_input</code>, <code>st.date_input</code>, <code>st.file_uploader</code>ã€‚</li>
                    <li><code>key=</code>: <strong>æå…¶é‡è¦</strong>ã€‚ç”¨äºåŒºåˆ†åŒç±»ç»„ä»¶ï¼Œä¸”åœ¨å¾ªç¯ä¸­åˆ›å»ºç»„ä»¶æ—¶å¿…é¡»å”¯ä¸€ã€‚</li>
                    <li><code>on_change</code> / <code>on_click</code>: æ³¨å†Œå›è°ƒå¤„ç†çŠ¶æ€ã€‚</li>
                </ul>
                <pre><code class="language-python"># è¿”å›å€¼ä¸ºç”¨æˆ·é€‰æ‹©ç»“æœ
genre = st.radio(
    "é€‰æ‹©ä½ å–œæ¬¢çš„æµæ´¾",
    ["å–œå‰§", "å‰§æƒ…", "çºªå½•ç‰‡"],
    key="genre_radio"
)

if st.button("æäº¤"):
    st.write(f"ä½ é€‰æ‹©äº†: {genre}")</code></pre>
            </div>

            <!-- 3. å¸ƒå±€ä¸å®¹å™¨ -->
            <div class="card">
                <h2>ğŸ“¦ å¸ƒå±€ä¸å®¹å™¨ <a href="https://docs.streamlit.io/develop/api-reference/layout" title="å¸ƒå±€å‚è€ƒ" target="_blank">>>></a></h2>
                <ul>
                    <li><code>st.sidebar</code>: ä¾§è¾¹æ ï¼Œé€‚åˆæ”¾å…¨å±€è¿‡æ»¤å™¨ã€‚</li>
                    <li><code>st.columns(n)</code>: æ°´å¹³åˆ†æ ï¼Œæ”¯æŒ <code>[1, 2, 1]</code> æƒé‡ã€‚</li>
                    <li><code>st.tabs(["A", "B"])</code>: é¡µé¢å†…çš„æ ‡ç­¾åˆ‡æ¢ã€‚</li>
                    <li><code>st.expander("Label")</code>: å¯æ”¶èµ·çš„è¯¦æƒ…åŒºåŸŸã€‚</li>
                    <li><code>st.empty()</code>: <strong>å ä½ç¬¦</strong>ã€‚å¯åç»­è°ƒç”¨ <code>placeholder.write(...)</code> è¦†ç›–æ—§å†…å®¹ã€‚</li>
                </ul>
                <pre><code class="language-python">col1, col2 = st.columns([1, 2])
with col1:
    st.metric("æ—¥æ´»", "1.2k", "12%")
with col2:
    with st.expander("æŸ¥çœ‹æ˜ç»†"):
        st.write("è¡¨æ ¼å†…å®¹...")</code></pre>
            </div>

            <!-- 4. Session State (è¿›é˜¶æ ¸å¿ƒ) -->
            <div class="card">
                <h2>ğŸ§  Session State <a href="https://docs.streamlit.io/develop/concepts/architecture/session-state" title="çŠ¶æ€ç®¡ç†" target="_blank">>>></a></h2>
                <div class="desc">è·¨é‡è·‘æŒä¹…åŒ–æ•°æ®çš„å”¯ä¸€é€”å¾„</div>
                <ul>
                    <li>è¡Œä¸ºç±»ä¼¼å­—å…¸: <code>st.session_state["k"]</code>ã€‚</li>
                    <li><strong>åˆå§‹åŒ–èŒƒå¼</strong>: å¿…é¡»å…ˆæ£€æŸ¥ key æ˜¯å¦å­˜åœ¨ã€‚</li>
                    <li><strong>Widget ç»‘å®š</strong>: widget çš„ key ä¼šè‡ªåŠ¨æ˜ å°„åˆ° session_stateã€‚</li>
                    <li><strong>è­¦å‘Š</strong>: ä¸èƒ½ç”¨ state è®¾ç½® button/file_uploaderã€‚</li>
                </ul>
                <pre><code class="language-python">if "counter" not in st.session_state:
    st.session_state.counter = 0

def increment():
    st.session_state.counter += 1

st.button("åŠ  1", on_click=increment)
st.write(f"å½“å‰å€¼: {st.session_state.counter}")</code></pre>
            </div>

            <!-- 5. æ€§èƒ½ä¼˜åŒ–ï¼šç¼“å­˜ -->
            <div class="card">
                <h2>âš¡ æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜ <a href="https://docs.streamlit.io/develop/concepts/architecture/caching" title="ç¼“å­˜æœºåˆ¶" target="_blank">>>></a></h2>
                <ul>
                    <li><code>@st.cache_data</code>: ç¼“å­˜<strong>æ•°æ®/åºåˆ—åŒ–ç»“æœ</strong>ã€‚æ”¯æŒ <code>ttl</code> (è¿‡æœŸæ—¶é—´), <code>max_entries</code> (æœ€å¤§æ¡æ•°)ã€‚</li>
                    <li><code>@st.cache_resource</code>: ç¼“å­˜<strong>å•ä¾‹å¯¹è±¡</strong> (å¦‚ DB è¿æ¥ã€ML æ¨¡å‹)ã€‚</li>
                    <li><strong>å‚æ•°è¿‡æ»¤</strong>: å‰ç¼€å¸¦ä¸‹åˆ’çº¿çš„å‚æ•° (å¦‚ <code>_db</code>) ä¸å‚ä¸ hash è®¡ç®—ã€‚</li>
                </ul>
                <pre><code class="language-python">@st.cache_data(ttl=3600)
def fetch_api_data(url):
    # æ˜‚è´µæ“ä½œ
    return requests.get(url).json()

@st.cache_resource
def load_model():
    return pipeline("sentiment-analysis")</code></pre>
            </div>

            <!-- 6. LLM & Chat (å¤§æ¨¡å‹é›†æˆ) -->
            <div class="card">
                <h2>ğŸ¤– LLM & Chat é›†æˆ <a href="https://docs.streamlit.io/develop/tutorials/llms/build-conversational-apps" title="èŠå¤©æ•™ç¨‹" target="_blank">>>></a></h2>
                <div class="desc">å¿«é€Ÿæ„å»º AI èŠå¤©åº”ç”¨</div>
                <ul>
                    <li><code>st.chat_message("user" | "assistant")</code>: æ°”æ³¡å®¹å™¨ã€‚</li>
                    <li><code>st.chat_input("...")</code>: å›ºå®šåº•éƒ¨çš„è¾“å…¥æ¡†ã€‚</li>
                    <li><code>st.write_stream(generator)</code>: <strong>æµå¼è¾“å‡º</strong>ï¼Œæ”¯æŒå°† LLM ç”Ÿæˆå™¨ç›´æ¥æ¸²æŸ“ä¸ºæ‰“å­—æœºæ•ˆæœã€‚</li>
                </ul>
                <pre><code class="language-python">if prompt := st.chat_input():
    st.chat_message("user").write(prompt)
    with st.chat_message("assistant"):
        # ç›´æ¥ä¼ å…¥ç”Ÿæˆå™¨å³å¯æµå¼æ¸²æŸ“
        full_res = st.write_stream(response_gen(prompt))
        st.session_state.messages.append(full_res)</code></pre>
            </div>

            <!-- 7. æ•°æ®ä¸å›¾è¡¨ -->
            <div class="card">
                <h2>ğŸ“Š æ•°æ®ä¸å›¾è¡¨ <a href="https://docs.streamlit.io/develop/api-reference/charts" title="å›¾è¡¨å‚è€ƒ" target="_blank">>>></a></h2>
                <ul>
                    <li><code>st.dataframe</code>: äº¤äº’å¼è¡¨æ ¼ï¼Œæ”¯æŒæ’åº/ç­›é€‰ã€‚</li>
                    <li><code>st.data_editor</code>: <strong>å¯ç¼–è¾‘è¡¨æ ¼</strong>ï¼Œå¯æ•è·å˜æ›´ã€‚</li>
                    <li><code>st.metric</code>: å¤§å­—æŒ‡æ ‡ï¼Œæ”¯æŒå¢é‡ delta é¢œè‰²ã€‚</li>
                    <li>å›¾è¡¨äº‹ä»¶: <code>st.plotly_chart(..., on_select="rerun")</code> å¯è¿”å›ç”¨æˆ·é€‰ä¸­çš„ç‚¹ã€‚</li>
                </ul>
                <pre><code class="language-python">df = pd.DataFrame({"x": [1,2], "y": [3,4]})
# å¼€å¯è‡ªåŠ¨æ‹‰ä¼¸
st.dataframe(df, use_container_width=True)

# æ•è·ç”¨æˆ·ç¼–è¾‘
edited_df = st.data_editor(df)</code></pre>
            </div>

            <!-- 8. è¡¨å•æäº¤ (æ‰¹é‡è®¡ç®—) -->
            <div class="card">
                <h2>ğŸ“ è¡¨å•ä¸æäº¤ <a href="https://docs.streamlit.io/develop/api-reference/execution-flow/st.form" title="è¡¨å•å‚è€ƒ" target="_blank">>>></a></h2>
                <div class="desc">é˜²æ­¢åœ¨è¾“å…¥å‚æ•°è¿‡ç¨‹ä¸­ç”±äºé‡è·‘å¯¼è‡´çš„é¢‘ç¹è®¡ç®—</div>
                <ul>
                    <li><code>st.form("my_form")</code>: å†…éƒ¨æ‰€æœ‰ widget äº¤äº’ä¸ä¼šè§¦å‘é‡è·‘ã€‚</li>
                    <li><code>st.form_submit_button</code>: å¿…é¡»å­˜åœ¨ä¸”ä»…èƒ½åœ¨æ­¤ç»„ä»¶ç‚¹å‡»æ—¶æäº¤å¹¶è§¦å‘é‡è·‘ã€‚</li>
                </ul>
                <pre><code class="language-python">with st.form("settings"):
    n = st.number_input("æ•°é‡", 10)
    mode = st.selectbox("æ¨¡å¼", ["A", "B"])
    # åªæœ‰ç‚¹å‡»è¿™é‡Œæ‰ä¼šæ‰§è¡Œåç»­æ˜‚è´µä»»åŠ¡
    submitted = st.form_submit_button("å¼€å§‹è®¡ç®—")

if submitted:
    st.write(f"è®¡ç®—ä¸­: {n}, {mode}")</code></pre>
            </div>

            <!-- 9. å¤šé¡µåº”ç”¨ä¸å¯¼èˆª -->
            <div class="card">
                <h2>ğŸ§­ å¤šé¡µä¸å¯¼èˆª <a href="https://docs.streamlit.io/develop/concepts/multipage-apps" title="å¤šé¡µå‚è€ƒ" target="_blank">>>></a></h2>
                <ul>
                    <li><strong>åŠ¨æ€å®šä¹‰</strong>: <code>st.navigation([st.Page("a.py"), ...])</code>ã€‚</li>
                    <li><strong>ç›®å½•æ¨¡å¼</strong>: è‡ªåŠ¨è¯†åˆ«é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>pages/</code> æ–‡ä»¶å¤¹ã€‚</li>
                    <li><code>st.switch_page</code>: ä»£ç é€»è¾‘å¼ºåˆ¶è·³è½¬é¡µé¢ã€‚</li>
                    <li><code>st.page_link</code>: æ­£æ–‡ä¸­æ’å…¥ç›´è¾¾é“¾æ¥ï¼ˆå¸¦å›¾æ ‡ï¼‰ã€‚</li>
                </ul>
                <pre><code class="language-python"># æ–°ç‰ˆ(æ¨è) ç»Ÿä¸€å¯¼èˆªé…ç½®
pg = st.navigation([
    st.Page("home.py", title="é¦–é¡µ", icon="ğŸ "),
    st.Page("dash.py", title="å›¾è¡¨", icon="ğŸ“Š")
])
pg.run()</code></pre>
            </div>

            <!-- 10. URL çŠ¶æ€ç®¡ç† -->
            <div class="card">
                <h2>ğŸ”— URL ä¸æŸ¥è¯¢å‚æ•° <a href="https://docs.streamlit.io/develop/api-reference/user/st.query_params" title="å‚æ•°å‚è€ƒ" target="_blank">>>></a></h2>
                <div class="desc">è®©åº”ç”¨çŠ¶æ€å¯åˆ†äº«ï¼ˆDeep Linkingï¼‰</div>
                <ul>
                    <li><code>st.query_params</code>: è·å–æˆ–è®¾ç½® URL åçš„ <code>?k=v</code>ã€‚</li>
                    <li><strong>å…¸å‹åœºæ™¯</strong>: æŠŠé€‰å®šçš„è¿‡æ»¤å™¨åŒæ­¥åˆ° URLï¼Œåˆ·æ–°ä¸ä¸¢å¤±ã€‚</li>
                </ul>
                <pre><code class="language-python"># è¯»å– URL å‚æ•°
region = st.query_params.get("region", "CN")

# è®¾ç½® URL å‚æ•° (åŒæ­¥çŠ¶æ€)
if st.button("åˆ‡æ¢åˆ°ç¾å›½åŒº"):
    st.query_params["region"] = "US"</code></pre>
            </div>

            <!-- 11. CLI å¸¸ç”¨å‘½ä»¤ -->
            <div class="card">
                <h2>ğŸ’» CLI å‘½ä»¤è¡Œå‚è€ƒ <a href="https://docs.streamlit.io/develop/api-reference/cli" title="CLI å‚è€ƒ" target="_blank">>>></a></h2>
                <ul>
                    <li><code>streamlit run app.py</code>: å¯åŠ¨ã€‚</li>
                    <li><code>--server.port=8501</code>: æŒ‡å®šç«¯å£ã€‚</li>
                    <li><code>--server.headless=true</code>: æ— å¤´æ¨¡å¼è¿è¡Œã€‚</li>
                    <li><code>streamlit config show</code>: æ‰“å°å…¨é‡é…ç½®ã€‚</li>
                    <li><code>streamlit cache clear</code>: æ¸…ç†æœ¬åœ°ç£ç›˜ç¼“å­˜ã€‚</li>
                </ul>
                <pre><code class="language-bash"># å¸¸ç”¨å¯åŠ¨ç»„åˆ
streamlit run main.py \
  --server.address=0.0.0.0 \
  --theme.primaryColor="#ff4b4b"</code></pre>
            </div>

            <!-- 12. çŠ¶æ€ä¸æç¤º -->
            <div class="card">
                <h2>ğŸ”” çŠ¶æ€ä¸è¿›åº¦åé¦ˆ <a href="https://docs.streamlit.io/develop/api-reference/status" title="çŠ¶æ€å‚è€ƒ" target="_blank">>>></a></h2>
                <ul>
                    <li><code>st.spinner("...")</code>: ä¸´æ—¶åŠ è½½åŠ¨æ•ˆã€‚</li>
                    <li><code>st.status("...")</code>: <strong>è¿›é˜¶çŠ¶æ€å®¹å™¨</strong>ï¼Œæ”¯æŒé€æ­¥æ›´æ–°æ­¥éª¤ã€‚</li>
                    <li>åé¦ˆ: <code>st.toast</code>, <code>st.balloons</code>, <code>st.snow</code>ã€‚</li>
                    <li>è­¦å‘Š: <code>st.error</code>, <code>st.warning</code>, <code>st.info</code>, <code>st.success</code>ã€‚</li>
                </ul>
                <pre><code class="language-python">with st.status("æ­£åœ¨æ‹‰å–æ•°æ®...", expanded=True) as s:
    st.write("æ­£åœ¨è¿æ¥ API...")
    time.sleep(1)
    st.write("æ­£åœ¨å¤„ç† JSON...")
    s.update(label="å®Œæˆ!", state="complete")</code></pre>
            </div>

        </div>
    </div>

    <script src="../../assets/common.js"></script>
    <script>
        // Prism.js ä»£ç é«˜äº®åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>
