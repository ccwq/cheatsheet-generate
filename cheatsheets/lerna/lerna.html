<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lerna</title>
  <link rel="stylesheet" href="../../css/variables.css">
  <link rel="stylesheet" href="../../css/common.css">
  <style>:root{--colWidth:340px;--gap:16px}
    .hlink{color:#93cdfc;text-decoration:none;margin-left:6px}
    .hlink:hover{text-decoration:underline}
  </style>
  <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
  <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
</head>
<body>
  <div class="container">
    <div class="panel">
      <span class="title">Lernaï¼ˆMonorepo ç®¡ç†ï¼‰</span>
      <label for="columnWidth">ğŸ”§ è°ƒæ•´æ¯åˆ—å®½åº¦ï¼š</label>
      <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="340">
      <span id="widthVal" class="slider-val">340px</span>
    </div>

    <div class="cheat-columns" id="columns">

      <div class="card">
        <h2>åˆå§‹åŒ–ä¸ä¿¡æ¯ <a class="hlink" href="https://github.com/lerna/lerna/blob/main/website/docs/api-reference/commands.md" target="_blank">&gt;&gt;&gt;</a></h2>
        <ul>
          <li><code>lerna init</code> åˆå§‹åŒ–ï¼ˆæ¨èé…åˆå·¥ä½œåŒºç®¡ç†å™¨ï¼Œå¦‚ pnpm workspacesï¼‰</li>
          <li><code>lerna info</code> è¾“å‡ºç¯å¢ƒä¸ä¾èµ–ä¿¡æ¯</li>
          <li><code>lerna add-caching</code> ä¸ Nx é›†æˆå¯ç”¨ç¼“å­˜/ä»»åŠ¡å›¾</li>
          <li><code>lerna repair</code> ä¿®å¤å¸¸è§é…ç½®ä¸ç¼“å­˜é—®é¢˜</li>
        </ul>
      </div>

      <div class="card">
        <h2>æšä¸¾ä¸å˜æ›´é›† <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/changed#readme" target="_blank">changed</a> <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/list#readme" target="_blank">list</a> <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/diff#readme" target="_blank">diff</a></h2>
        <ul>
          <li><code>lerna list</code>ï¼›ä»…å˜æ›´ï¼š<code>lerna list --since</code>ï¼ˆæˆ–æŒ‡å®š tagï¼‰</li>
          <li><code>lerna changed</code> åŸºäºä¸Šæ¬¡å‘å¸ƒæ¨æ–­å˜æ›´åŒ…</li>
          <li><code>lerna diff [pkg]</code> æŸ¥çœ‹æŒ‡å®šåŒ…çš„ git å·®å¼‚</li>
        </ul>
      </div>

      <div class="card">
        <h2>è¿è¡Œä¸æ‰§è¡Œ <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/run#readme" target="_blank">run</a> <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/exec#readme" target="_blank">exec</a> <a class="hlink" href="https://github.com/lerna/lerna/blob/main/packages/lerna/src/commands/watch/README.md" target="_blank">watch</a></h2>
        <ul>
          <li><code>lerna run build --stream --concurrency 4</code> å¹¶å‘ä¸”æŒ‰åŒ…æµå¼è¾“å‡º</li>
          <li><code>lerna exec -- &lt;cmd&gt;</code>ï¼›å‰–æï¼š<code>--profile</code> è¾“å‡ºæ€§èƒ½æ•°æ®</li>
          <li>è¿‡æ»¤ï¼š<code>--scope pkg-*</code>ã€<code>--ignore tests*</code>ã€<code>--since</code></li>
          <li><code>lerna watch -- &lt;cmd&gt;</code> ç›‘å¬å˜æ›´è‡ªåŠ¨æ‰§è¡Œ</li>
        </ul>
      </div>

      <div class="card">
        <h2>ç‰ˆæœ¬ä¸å‘å¸ƒ <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/version#readme" target="_blank">version</a> <a class="hlink" href="https://github.com/lerna/lerna/tree/main/libs/commands/publish#readme" target="_blank">publish</a></h2>
        <ul>
          <li><code>lerna version</code> æå‡ç‰ˆæœ¬å¹¶åˆ›å»º Git tagï¼ˆæ”¯æŒè‡ªå®šä¹‰ <code>--git-tag-command</code>ï¼‰</li>
          <li><code>lerna publish</code>ï¼šé»˜è®¤äº¤äº’å¼ï¼›æˆ– <code>from-git</code>/<code>from-package</code></li>
          <li>å‘å¸ƒè¿‡æ»¤ï¼š<code>--skip-npm</code>ã€<code>--yes</code>ã€<code>--preid beta</code></li>
          <li>åˆå¹¶åˆ†æ”¯ tagï¼š<code>--include-merged-tags</code>ï¼ˆä»…ç‰¹å®šæµç¨‹ä½¿ç”¨ï¼‰</li>
        </ul>
      </div>

      <div class="card">
        <h2>æœ€ä½³å®è·µ <a class="hlink" href="https://github.com/lerna/lerna" target="_blank">&gt;&gt;&gt;</a></h2>
        <ul>
          <li>å·¥ä½œåŒºï¼šä»¥ pnpm/yarn/npm workspaces ç®¡ç†åŒ…è·¯å¾„</li>
          <li>Nxï¼šæ·»åŠ ç¼“å­˜ã€ä»»åŠ¡å›¾ä¸ä¾èµ–æ„ŸçŸ¥æ‰§è¡Œï¼ˆ<code>add-caching</code>ï¼‰</li>
          <li>æµæ°´çº¿ï¼šå‘å¸ƒå‰æ„å»º/æµ‹è¯•/lint/ç‰ˆæœ¬ä¸€è‡´æ€§æ ¡éªŒ</li>
          <li>é”å®šï¼šä¾èµ–é”æ–‡ä»¶çº³å…¥ç‰ˆæœ¬ç®¡ç†å¹¶å¯ç”¨ä¸¥æ ¼å®‰è£…</li>
        </ul>
      </div>

      <div class="card">
        <h2>ç¤ºä¾‹ï¼šlerna.json ç‰‡æ®µ</h2>
        <ul>
          <li><pre class="code">{
  "version": "independent",
  "npmClient": "pnpm",
  "command": {
    "version": { "gitTagCommand": "git tag %s -m %s" },
    "run": { "stream": true }
  }
}</pre></li>
          <li class="desc">ä½¿ç”¨å·¥ä½œåŒºé…ç½®åŒ…è·¯å¾„ï¼›å‘½ä»¤è¡Œä¸ºå¯åœ¨æ­¤é›†ä¸­é…ç½®</li>
        </ul>
      </div>

    </div>
  </div>
  <script>
    const slider=document.getElementById('columnWidth');
    const widthVal=document.getElementById('widthVal');
    function apply(v){document.documentElement.style.setProperty('--colWidth',v+'px');widthVal.textContent=v+'px'}
    slider.addEventListener('input',e=>apply(e.target.value));
    apply(slider.value);
  </script>
</body>
</html>
