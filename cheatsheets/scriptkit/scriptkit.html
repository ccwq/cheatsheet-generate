<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Script Kitå¼€å‘å‘½ä»¤é€ŸæŸ¥è¡¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../assets/variables.css">
  <link rel="stylesheet" href="../../assets/global.css">
  <link rel="stylesheet" href="../../assets/cheatsheet.css">
  <link rel="icon" type="image/png" href="../../assets/brand/cheatsheet.png" />
  <link rel="apple-touch-icon" href="../../assets/brand/cheatsheet.png" />
  <style>
    :root {
      --colWidth: 340px;
      --gap: 16px;
    }
    .panel label {
      color: var(--panel-accent);
    }
    .panel .title {
      color: var(--panel-accent);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="panel">
      <span class="title">âš¡ Script Kitå¼€å‘é€ŸæŸ¥è¡¨</span>
      <label for="columnWidth">ğŸ”§ è°ƒæ•´æ¯åˆ—å®½åº¦ï¼š</label>
      <input id="columnWidth" class="slider-bar" type="range" min="300" max="660" value="340">
      <span id="widthVal" class="slider-val">340px</span>
    </div>
    <div class="cheat-columns" id="columns">
      <div class="card">
        <h2>ğŸ“¦ å®‰è£…ä¸å¯åŠ¨ <a href="https://github.com/johnlindquist/kit" title="å®˜æ–¹æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>npm install -g @johnlindquist/kit</code> | å…¨å±€å®‰è£…Script Kit</li>
          <li><code>kit</code> | å¯åŠ¨Script Kitç•Œé¢</li>
          <li><code>~/.kit</code> | é»˜è®¤è„šæœ¬å­˜å‚¨ç›®å½•</li>
        </ul>
        <h3>åŸºç¡€è„šæœ¬ç»“æ„</h3>
        <pre>import "@johnlindquist/kit";

let name = await arg("è¯·è¾“å…¥åå­—");
await showToast(`ä½ å¥½ï¼Œ${name}!`);</pre>
        <div class="desc">Script Kitæä¾›TypeScriptæ”¯æŒå’Œä¸°å¯Œçš„API</div>
      </div>

      <div class="card">
        <h2>ğŸ“¦ åŒ…ç®¡ç†API <a href="https://github.com/johnlindquist/kit/blob/main/orientation/npm.md" title="åŒ…ç®¡ç†æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await npm("package")</code> | å®‰è£…å¹¶å¯¼å…¥åŒ…</li>
          <li><code>appInstallMultiple(pkgs)</code> | æ‰¹é‡å®‰è£…åŒ…</li>
          <li><code>installMissingPackage(pkg)</code> | æ¡ä»¶å®‰è£…</li>
          <li><code>npmInstall(pkg)</code> | ä»…å®‰è£…ä¸å¯¼å…¥</li>
        </ul>
        <h3>åŒ…ç®¡ç†ç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// å®‰è£…å¹¶å¯¼å…¥
let lodash = await npm("lodash")
let axios = await npm("axios")

// æ‰¹é‡å®‰è£…
await appInstallMultiple(["axios", "lodash", "dayjs"])

// æ¡ä»¶å®‰è£…ï¼ˆä»…å½“ç¼ºå¤±æ—¶ï¼‰
await installMissingPackage("lodash")

// ä»…å®‰è£…ä¸å¯¼å…¥
await npmInstall("package-name")

// ä½œç”¨åŸŸåŒ…
let kit = await npm("@johnlindquist/kit")
let babel = await npm("@babel/core")</pre>
        <div class="desc">è‡ªåŠ¨å¤„ç†åŒ…çš„å®‰è£…å’Œä¾èµ–ç®¡ç†</div>
      </div>

      <div class="card">
        <h2>ğŸ’¬ ç”¨æˆ·äº¤äº’API <a href="https://github.com/johnlindquist/kit#user-input" title="äº¤äº’APIæ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await arg(prompt)</code> | æ–‡æœ¬è¾“å…¥æ¡†</li>
          <li><code>await select(options)</code> | é€‰æ‹©åˆ—è¡¨</li>
          <li><code>await confirm(message)</code> | ç¡®è®¤å¯¹è¯æ¡†</li>
          <li><code>await multi-select(options)</code> | å¤šé€‰åˆ—è¡¨</li>
        </ul>
        <h3>äº¤äº’ç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// æ–‡æœ¬è¾“å…¥
let name = await arg("è¯·è¾“å…¥ä½ çš„åå­—ï¼š")

// å•é€‰
let choice = await select(["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"])

// ç¡®è®¤
let confirmed = await confirm("ç¡®å®šç»§ç»­å—ï¼Ÿ")

// å¤šé€‰
let tools = await multi-select(["git", "npm", "docker", "k8s"])

// å¸¦é»˜è®¤å€¼
let email = await arg("é‚®ç®±ï¼š", {defaultValue: "user@example.com"})</pre>
        <div class="desc">ä¸°å¯Œçš„ç”¨æˆ·äº¤äº’ç»„ä»¶æå‡è„šæœ¬ä½“éªŒ</div>
      </div>

      <div class="card">
        <h2>ğŸ”” ç³»ç»Ÿé€šçŸ¥ä¸ç•Œé¢ <a href="https://github.com/johnlindquist/kit#notifications" title="é€šçŸ¥æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await showToast(message)</code> | æ¡Œé¢é€šçŸ¥</li>
          <li><code>await notify(title, body)</code> | ç³»ç»Ÿé€šçŸ¥</li>
          <li><code>await div(html)</code> | HTMLå†…å®¹æ˜¾ç¤º</li>
          <li><code>await md(content)</code> | Markdownæ˜¾ç¤º</li>
        </ul>
        <h3>é€šçŸ¥ç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// ç®€å•é€šçŸ¥
await showToast("ä»»åŠ¡å®Œæˆï¼")

// ç³»ç»Ÿé€šçŸ¥
await notify("ä»»åŠ¡çŠ¶æ€", "æ„å»ºä»»åŠ¡å·²å®Œæˆï¼Œè€—æ—¶2åˆ†é’Ÿ")

// HTMLå†…å®¹
await div("<h1>HTMLæ ‡é¢˜</h1><p>æ®µè½å†…å®¹</p>")

// Markdownå†…å®¹
await md(`
# æ ‡é¢˜
- åˆ—è¡¨é¡¹1
- åˆ—è¡¨é¡¹2
**ç²—ä½“æ–‡æœ¬**
`)

// å¸¦è¿›åº¦æ¡
let progress = 0
let interval = setInterval(async () => {
  progress += 10
  await showToast(`è¿›åº¦ï¼š${progress}%`)
  if (progress >= 100) clearInterval(interval)
}, 1000)</pre>
        <div class="desc">å¤šç§å±•ç¤ºæ–¹å¼æ»¡è¶³ä¸åŒé€šçŸ¥éœ€æ±‚</div>
      </div>

      <div class="card">
        <h2>ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ“ä½œ <a href="https://github.com/johnlindquist/kit#file-operations" title="æ–‡ä»¶æ“ä½œæ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await readFile(path)</code> | è¯»å–æ–‡ä»¶</li>
          <li><code>await writeFile(path, content)</code> | å†™å…¥æ–‡ä»¶</li>
          <li><code>await getFiles(pattern)</code> | æ–‡ä»¶æœç´¢</li>
          <li><code>await pathExists(path)</code> | è·¯å¾„æ£€æŸ¥</li>
        </ul>
        <h3>æ–‡ä»¶æ“ä½œç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// è¯»å–æ–‡ä»¶
let content = await readFile("config.json")
let data = JSON.parse(content)

// å†™å…¥æ–‡ä»¶
await writeFile("output.txt", "Hello World!")

// æœç´¢æ–‡ä»¶
let jsFiles = await getFiles("*.js", { recursive: true })
let allFiles = await getFiles("**/*", { includeDirectories: true })

// è·¯å¾„æ“ä½œ
let configPath = path.join(home(), ".config", "app.json")
let exists = await pathExists(configPath)

// è¯»å–JSON
let packageJson = await readJson("package.json")
await writeJson("package-backup.json", packageJson)</pre>
        <div class="desc">å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ”¯æŒ</div>
      </div>

      <div class="card">
        <h2>ğŸ“‹ å‰ªè´´æ¿æ“ä½œ <a href="https://github.com/johnlindquist/kit#clipboard" title="å‰ªè´´æ¿æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await clipboard.read()</code> | è¯»å–å‰ªè´´æ¿</li>
          <li><code>await clipboard.write(text)</code> | å†™å…¥å‰ªè´´æ¿</li>
          <li><code>await clipboard.readText()</code> | è¯»æ–‡æœ¬å†…å®¹</li>
          <li><code>await clipboard.readImage()</code> | è¯»å›¾åƒå†…å®¹</li>
        </ul>
        <h3>å‰ªè´´æ¿ç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// è¯»å–å‰ªè´´æ¿
let clipboardContent = await clipboard.read()
await showToast(`å‰ªè´´æ¿å†…å®¹ï¼š${clipboardContent}`)

// å†™å…¥å‰ªè´´æ¿
await clipboard.write("Hello from Script Kit!")

// å¤„ç†å¤åˆ¶å†…å®¹
let text = await arg("é€‰æ‹©è¦å¤åˆ¶çš„æ–‡æœ¬ï¼š")
await clipboard.write(text)
await showToast("å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")

// å‰ªè´´æ¿æ ¼å¼è½¬æ¢
let content = await clipboard.read()
await clipboard.write(content.toUpperCase())

// JSONå†…å®¹å¤„ç†
let jsonData = await clipboard.read()
try {
  let parsed = JSON.parse(jsonData)
  await clipboard.write(JSON.stringify(parsed, null, 2))
  await showToast("JSONæ ¼å¼åŒ–å®Œæˆ")
} catch {
  await showToast("æ— æ•ˆçš„JSONæ ¼å¼")
}</pre>
        <div class="desc">å‰ªè´´æ¿æ“ä½œå®ç°æ–‡æœ¬å’Œæ•°æ®çš„å¿«é€Ÿäº¤æ¢</div>
      </div>

      <div class="card">
        <h2>âš¡ ç¯å¢ƒç®¡ç†ä¸ç³»ç»Ÿ <a href="https://github.com/johnlindquist/kit#environment" title="ç¯å¢ƒç®¡ç†æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>env.VAR_NAME</code> | è®¿é—®ç¯å¢ƒå˜é‡</li>
          <li><code>home()</code> | è·å–ç”¨æˆ·ä¸»ç›®å½•</li>
          <li><code>cwd()</code> | è·å–å½“å‰å·¥ä½œç›®å½•</li>
          <li><code>exec(command)</code> | æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
        </ul>
        <h3>ç¯å¢ƒæ“ä½œç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

// ç¯å¢ƒå˜é‡è®¿é—®
let apiKey = env.API_KEY || "default-key"
let nodeEnv = env.NODE_ENV || "development"

// è®¾ç½®ç¯å¢ƒå˜é‡
env.NODE_ENV = "production"
env.DEBUG = "true"

// ç›®å½•æ“ä½œ
let homeDir = home()
let cwdPath = cwd()
let projectPath = path.join(homeDir, "projects")

// æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
let gitStatus = await exec("git status")
await showToast(div(`<pre>${gitStatus}</pre>`))

// å¸¦å‚æ•°çš„å‘½ä»¤
let version = await exec("node --version")
await showToast(`Node.jsç‰ˆæœ¬ï¼š${version.trim()}`)

// å¼€å‘ç¯å¢ƒæ£€æŸ¥
let configs = {
  git: path.join(home(), ".gitconfig"),
  ssh: path.join(home(), ".ssh"),
  npm: path.join(home(), ".npmrc")
}

let missing = []
for (let [name, configPath] of Object.entries(configs)) {
  if (!await pathExists(configPath)) {
    missing.push(name)
  }
}

if (missing.length > 0) {
  await showToast(`ç¼ºå°‘é…ç½®ï¼š${missing.join(", ")}`)
}</pre>
        <div class="desc">ç¯å¢ƒç®¡ç†å’Œç³»ç»Ÿé›†æˆä¸ºè„šæœ¬æä¾›å¼ºå¤§èƒ½åŠ›</div>
      </div>

      <div class="card">
        <h2>ğŸ—ï¸ é¡¹ç›®è„šæ‰‹æ¶ <a href="https://github.com/johnlindquist/kit/blob/main/orientation/git.md" title="è„šæ‰‹æ¶æ–‡æ¡£" target="_blank" style="color:#93cdfc;">>></a></h2>
        <ul>
          <li><code>await degit(template)</code> | å…‹éš†æ¨¡æ¿</li>
          <li><code>await readJson(path)</code> | è¯»å–JSONæ–‡ä»¶</li>
          <li><code>await writeJson(path, data)</code> | å†™å…¥JSONæ–‡ä»¶</li>
          <li><code>await copy(source, target)</code> | å¤åˆ¶æ–‡ä»¶</li>
        </ul>
        <h3>é¡¹ç›®åˆ›å»ºç¤ºä¾‹</h3>
        <pre>import "@johnlindquist/kit";

async function createProject(projectName, template) {
  console.log(`åˆ›å»º ${projectName} ä» ${template}...`)

  try {
    // å…‹éš†æ¨¡æ¿
    await degit(template).clone(`./${projectName}`)

    // æ›´æ–° package.json
    let pkgPath = path.join(projectName, 'package.json')
    let pkg = await readJson(pkgPath)
    pkg.name = projectName
    pkg.version = "1.0.0"
    pkg.author = "Your Name"
    await writeJson(pkgPath, pkg, { spaces: 2 })

    // å®‰è£…ä¾èµ–
    await exec(`cd ${projectName} && npm install`)

    // åˆå§‹åŒ–Git
    await exec(`cd ${projectName} && git init`)

    console.log(`âœ… é¡¹ç›® ${projectName} åˆ›å»ºæˆåŠŸï¼`)
    await showToast(`é¡¹ç›®${projectName}å·²åˆ›å»º`)
  } catch (error) {
    console.error('åˆ›å»ºå¤±è´¥:', error)
    await showToast(`åˆ›å»ºå¤±è´¥ï¼š${error.message}`)
  }
}

// ä½¿ç”¨ç¤ºä¾‹
let projectName = await arg("é¡¹ç›®åç§°ï¼š")
let template = await select([
  "vite/vanilla",
  "vite/vue-ts",
  "vite/react-ts",
  "create-next-app"
])

await createProject(projectName, template)</pre>
        <div class="desc">è„šæ‰‹æ¶åŠŸèƒ½ç®€åŒ–é¡¹ç›®åˆå§‹åŒ–æµç¨‹</div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('columnWidth').addEventListener('input', function(e) {
      const width = e.target.value;
      document.getElementById('widthVal').textContent = width + 'px';
      const columns = document.getElementById('columns');
      columns.style.columnWidth = width + 'px';
    });
  </script>
</body>
</html>